This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
.env.example
.gitignore
admin.html
AIç¼–ç¨‹æç¤º.md
api/auth/admin/login.js
api/auth/student/login.js
api/auth/student/register.js
api/students/[id].js
api/students/index.js
css/styles.css
database/schema.sql
DEPLOYMENT.md
index.html
js/admin.js
js/auth.js
js/student.js
LICENSE
package.json
README.md
student.html
vercel.json
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="AIç¼–ç¨‹æç¤º.md">
<div class="plan-header">

# ğŸš€ AIç”Ÿæˆçš„å¼€å‘è®¡åˆ’

<div class="meta-info">

**â° ç”Ÿæˆæ—¶é—´ï¼š** 2025-11-10 09:59:19  
**ğŸ¤– AIæ¨¡å‹ï¼š** Qwen2.5-72B-Instruct  
**ğŸ’¡ åŸºäºç”¨æˆ·åˆ›æ„æ™ºèƒ½åˆ†æç”Ÿæˆ**  
**ğŸ”— Agentåº”ç”¨MCPæœåŠ¡å¢å¼º**

</div>

</div>

---

### å­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿå¼€å‘è®¡åˆ’

#### 1. äº§å“æ¦‚è¿°
å­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿæ˜¯ä¸€ä¸ªWebåº”ç”¨ç¨‹åºï¼Œæ—¨åœ¨å¸®åŠ©å­¦æ ¡ç®¡ç†äººå‘˜é«˜æ•ˆåœ°ç®¡ç†å­¦ç”Ÿä¿¡æ¯ã€‚ç³»ç»Ÿæä¾›äº†å­¦ç”Ÿä¿¡æ¯çš„å¢ã€åˆ ã€æ”¹ã€æŸ¥åŠŸèƒ½ï¼Œå¹¶æ”¯æŒç®¡ç†å‘˜å’Œå­¦ç”Ÿçš„ä¸åŒæƒé™ã€‚ç³»ç»Ÿå°†éƒ¨ç½²åœ¨Vercelä¸Šï¼Œä½¿ç”¨Neonæ•°æ®åº“è¿›è¡Œæ•°æ®å­˜å‚¨ï¼Œå¹¶ç¡®ä¿æ•°æ®çš„å®‰å…¨æ€§å’Œç³»ç»Ÿçš„å¯ç”¨æ€§ã€‚

#### 2. æŠ€æœ¯æ–¹æ¡ˆ

##### 2.1 ç³»ç»Ÿæ¶æ„è®¾è®¡
é‡‡ç”¨ç»å…¸çš„ HTMLã€CSSã€JavaScript æŠ€æœ¯æ¶æ„æ¥å®ç°ç³»ç»Ÿã€‚åç«¯åŸºäº Neon çš„äº‘æ•°æ®åº“å®ç°ï¼Œé€šè¿‡ Vercel çš„ Serverless Functions è¿›è¡Œæ•°æ®äº¤äº’ã€‚

##### 2.2 æŠ€æœ¯æ ˆ
- **å‰ç«¯**ï¼šHTMLã€CSSã€JavaScript
- **åç«¯**ï¼šæ— ä¼ ç»Ÿåç«¯ï¼Œåç«¯å…¨éƒ¨åŸºäº Neon çš„äº‘æ•°æ®åº“å®ç°
- **æ•°æ®åº“**ï¼šNeon
- **éƒ¨ç½²**ï¼šVercel

##### 2.3 æ•°æ®åº“è®¾è®¡
- **å­¦ç”Ÿè¡¨**ï¼šåŒ…å«å­¦ç”Ÿçš„åŸºæœ¬ä¿¡æ¯ï¼Œå¦‚å­¦å·ã€å§“åã€æ€§åˆ«ã€å¹´é¾„ã€ç­çº§ã€ä¸“ä¸šç­‰ã€‚
- **ç®¡ç†å‘˜è¡¨**ï¼šåŒ…å«ç®¡ç†å‘˜çš„åŸºæœ¬ä¿¡æ¯ï¼Œå¦‚ç”¨æˆ·åã€å¯†ç ã€‚

##### 2.4 ç³»ç»Ÿæµç¨‹

**1. ç®¡ç†å‘˜ç™»å½•**ï¼šç®¡ç†å‘˜è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œç³»ç»ŸéªŒè¯åè¿›å…¥å­¦ç”Ÿä¿¡æ¯ç®¡ç†ç•Œé¢ã€‚


**2. å­¦ç”Ÿä¿¡æ¯ç®¡ç†**ï¼šç®¡ç†å‘˜å¯ä»¥æŸ¥çœ‹æ‰€æœ‰å­¦ç”Ÿçš„ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥è¿›è¡Œå¢åŠ ã€åˆ é™¤ã€ä¿®æ”¹å’ŒæŸ¥è¯¢æ“ä½œã€‚


**3. å­¦ç”Ÿä¿¡æ¯æŸ¥è¯¢**ï¼šå­¦ç”Ÿè¾“å…¥å­¦å·å’Œå¯†ç ç™»å½•ï¼Œè·³è½¬åˆ°å­¦ç”Ÿä¿¡æ¯é¡µé¢ï¼Œå¯ä»¥æŸ¥çœ‹æœ¬å­¦ç”Ÿçš„ä¿¡æ¯ã€‚


#### 3. å¼€å‘è®¡åˆ’

##### 3.1 éœ€æ±‚åˆ†æ
- **éœ€æ±‚è°ƒç ”**ï¼šæ”¶é›†å’Œæ•´ç†ç”¨æˆ·éœ€æ±‚ï¼Œæ˜ç¡®ç³»ç»ŸåŠŸèƒ½å’ŒéåŠŸèƒ½éœ€æ±‚ã€‚
- **éœ€æ±‚æ•´ç†**ï¼šç¼–å†™è¯¦ç»†çš„éœ€æ±‚æ–‡æ¡£ï¼Œç¡®ä¿æ‰€æœ‰éœ€æ±‚éƒ½è¢«å‡†ç¡®è®°å½•ã€‚

##### 3.2 ç³»ç»Ÿè®¾è®¡
- **æ¶æ„è®¾è®¡**ï¼šè®¾è®¡ç³»ç»Ÿæ•´ä½“æ¶æ„ï¼Œç¡®å®šæŠ€æœ¯é€‰å‹å’Œæ¨¡å—åˆ’åˆ†ã€‚
- **UIè®¾è®¡**ï¼šè®¾è®¡ç”¨æˆ·ç•Œé¢ï¼Œç¡®ä¿ç•Œé¢å‹å¥½ã€æ“ä½œç®€ä¾¿ã€‚

##### 3.3 å¼€å‘å®æ–½
- **åç«¯å¼€å‘**ï¼šå®ç° Vercel çš„ Serverless Functionsï¼Œè¿æ¥ Neon æ•°æ®åº“ï¼Œå®ç°æ•°æ®å¢ã€åˆ ã€æ”¹ã€æŸ¥åŠŸèƒ½ã€‚
- **å‰ç«¯å¼€å‘**ï¼šå¼€å‘å‰ç«¯é¡µé¢ï¼Œå®ç°ç”¨æˆ·ç™»å½•ã€æ³¨å†Œã€å­¦ç”Ÿä¿¡æ¯ç®¡ç†ç­‰åŠŸèƒ½ã€‚
- **é›†æˆæµ‹è¯•**ï¼šè¿›è¡Œç³»ç»Ÿé›†æˆæµ‹è¯•ï¼Œç¡®ä¿å„æ¨¡å—æ­£å¸¸å·¥ä½œã€‚

##### 3.4 éƒ¨ç½²ä¸Šçº¿
- **éƒ¨ç½²å‡†å¤‡**ï¼šé…ç½® Vercel ç¯å¢ƒå˜é‡ï¼Œç¡®ä¿æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²æ­£ç¡®ã€‚
- **æ­£å¼ä¸Šçº¿**ï¼šå°†ç³»ç»Ÿéƒ¨ç½²åˆ° Vercelï¼Œè¿›è¡Œæœ€åçš„æµ‹è¯•å’Œä¼˜åŒ–ã€‚

##### 3.5 é¡¹ç›®æ—¶é—´è¡¨
```mermaid
gantt
    title é¡¹ç›®å¼€å‘ç”˜ç‰¹å›¾
    dateFormat YYYY-MM-DD
    axisFormat %m-%d
    
    section éœ€æ±‚åˆ†æ
    éœ€æ±‚è°ƒç ”     :done, req1, 2025-11-17, 3d
    éœ€æ±‚æ•´ç†     :done, req2, after req1, 4d
    
    section ç³»ç»Ÿè®¾è®¡
    æ¶æ„è®¾è®¡     :active, design1, after req2, 7d
    UIè®¾è®¡       :design2, after design1, 5d
    
    section å¼€å‘å®æ–½
    åç«¯å¼€å‘     :dev1, after design2, 14d
    å‰ç«¯å¼€å‘     :dev2, after design2, 14d
    é›†æˆæµ‹è¯•     :test1, after dev1, 7d
    
    section éƒ¨ç½²ä¸Šçº¿
    éƒ¨ç½²å‡†å¤‡     :deploy1, after test1, 3d
    æ­£å¼ä¸Šçº¿     :deploy2, after deploy1, 2d
```

#### 4. éƒ¨ç½²æ–¹æ¡ˆ
- **ç¯å¢ƒé…ç½®**ï¼šåœ¨ Vercel ä¸­é…ç½®ç¯å¢ƒå˜é‡ï¼ŒåŒ…æ‹¬æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸² `DATABASE_URL` å’Œå…¶ä»–å¿…è¦çš„é…ç½®ã€‚
- **æ•°æ®åº“åˆå§‹åŒ–**ï¼šä½¿ç”¨ Neon æ•°æ®åº“çš„åˆå§‹ç»“æ„ï¼Œåˆ›å»ºå­¦ç”Ÿè¡¨å’Œç®¡ç†å‘˜è¡¨ï¼Œå¹¶é¢„ç½®ä¸€ä¸ªé»˜è®¤ç®¡ç†å‘˜è´¦å·ï¼ˆç”¨æˆ·åï¼šadminï¼Œå¯†ç ï¼šadminï¼‰ã€‚
- **ä»£ç éƒ¨ç½²**ï¼šå°†é¡¹ç›®ä»£ç æ¨é€åˆ° Vercelï¼Œè‡ªåŠ¨æ„å»ºå¹¶éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒã€‚

#### 5. æ¨å¹¿ç­–ç•¥
- **å†…éƒ¨åŸ¹è®­**ï¼šå¯¹å­¦æ ¡ç®¡ç†äººå‘˜è¿›è¡Œç³»ç»Ÿä½¿ç”¨åŸ¹è®­ï¼Œç¡®ä¿ä»–ä»¬èƒ½å¤Ÿç†Ÿç»ƒæ“ä½œã€‚
- **ç”¨æˆ·æ‰‹å†Œ**ï¼šç¼–å†™è¯¦ç»†çš„ç”¨æˆ·æ‰‹å†Œï¼Œæä¾›ç³»ç»Ÿä½¿ç”¨æŒ‡å—ã€‚
- **åé¦ˆæœºåˆ¶**ï¼šå»ºç«‹ç”¨æˆ·åé¦ˆæœºåˆ¶ï¼ŒåŠæ—¶æ”¶é›†å’Œå¤„ç†ç”¨æˆ·æ„è§å’Œå»ºè®®ã€‚

### æ€»ç»“

ä»¥ä¸Šæ˜¯å®Œæ•´çš„å¼€å‘è®¡åˆ’å’ŒæŠ€æœ¯æ–¹æ¡ˆã€‚

---


<div class="prompts-highlight">

# ğŸ¤– AIç¼–ç¨‹åŠ©æ‰‹æç¤ºè¯

> ğŸ’¡ **ä½¿ç”¨è¯´æ˜**ï¼šä»¥ä¸‹æç¤ºè¯åŸºäºæ‚¨çš„é¡¹ç›®éœ€æ±‚å®šåˆ¶ç”Ÿæˆï¼Œå¯ç›´æ¥å¤åˆ¶åˆ° GitHub Copilotã€ChatGPTã€Claude ç­‰AIç¼–ç¨‹å·¥å…·ä¸­ä½¿ç”¨


#### 1. ç™»å½•æ³¨å†ŒåŠŸèƒ½å¼€å‘æç¤ºè¯


```
è¯·ä¸ºå­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿå¼€å‘ç™»å½•æ³¨å†ŒåŠŸèƒ½ã€‚

é¡¹ç›®èƒŒæ™¯ï¼š
å­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿæ˜¯ä¸€ä¸ªWebåº”ç”¨ç¨‹åºï¼Œæ—¨åœ¨å¸®åŠ©å­¦æ ¡ç®¡ç†äººå‘˜é«˜æ•ˆåœ°ç®¡ç†å­¦ç”Ÿä¿¡æ¯ã€‚ç³»ç»Ÿæä¾›äº†å­¦ç”Ÿä¿¡æ¯çš„å¢ã€åˆ ã€æ”¹ã€æŸ¥åŠŸèƒ½ï¼Œå¹¶æ”¯æŒç®¡ç†å‘˜å’Œå­¦ç”Ÿçš„ä¸åŒæƒé™ã€‚ç³»ç»Ÿå°†éƒ¨ç½²åœ¨Vercelä¸Šï¼Œä½¿ç”¨Neonæ•°æ®åº“è¿›è¡Œæ•°æ®å­˜å‚¨ï¼Œå¹¶ç¡®ä¿æ•°æ®çš„å®‰å…¨æ€§å’Œç³»ç»Ÿçš„å¯ç”¨æ€§ã€‚

åŠŸèƒ½è¦æ±‚ï¼š
1. å­¦ç”Ÿå¯ä»¥æ³¨å†Œç™»å½•ç³»ç»Ÿï¼›
2. ç®¡ç†å‘˜å¯ä»¥é€šè¿‡è¾“å…¥ç”¨æˆ·åå’Œå¯†ç è¿›è¡Œç™»å½•ï¼›
3. å¯†ç éœ€è¦åŠ å¯†å­˜å‚¨ï¼ˆå¦‚ bcryptï¼‰ï¼›
4. æ— éœ€éªŒè¯ç å’Œé‚®ç®±éªŒè¯ï¼›
5. æ— æ³¨å†Œç™»å½•çš„å¤–éƒ¨æœåŠ¡ã€‚

æŠ€æœ¯çº¦æŸï¼š
- ä½¿ç”¨ HTMLã€CSSã€JavaScript
- åç«¯åŸºäº Vercel çš„ Serverless Functions å®ç°
- æ•°æ®åº“ä½¿ç”¨ Neon
- è®¿é—® Neon æ•°æ®åº“çš„æ–¹å¼ï¼šåœ¨ Vercel ä¸Šå®ç° Serverless Functionsï¼ˆä½¿ç”¨ç¯å¢ƒå˜é‡å®‰å…¨åœ°è¿æ¥ Neonï¼‰ï¼›
- ç®¡ç†å‘˜è´¦å·æ˜¯éœ€è¦é¢„ç½®ä¸€ä¸ªé»˜è®¤è´¦å·ï¼ˆç”¨æˆ·åï¼šadminï¼Œå¯†ç ï¼šadminï¼‰

è¾“å‡ºè¦æ±‚ï¼š
- å®Œæ•´å¯è¿è¡Œä»£ç 
- è¯¦ç»†æ³¨é‡Šè¯´æ˜
- é”™è¯¯å¤„ç†æœºåˆ¶
- æµ‹è¯•ç”¨ä¾‹
```


#### 2. å­¦ç”Ÿä¿¡æ¯ç®¡ç†åŠŸèƒ½å¼€å‘æç¤ºè¯


```
è¯·ä¸ºå­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿå¼€å‘å­¦ç”Ÿä¿¡æ¯ç®¡ç†åŠŸèƒ½ã€‚

é¡¹ç›®èƒŒæ™¯ï¼š
å­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿæ˜¯ä¸€ä¸ªWebåº”ç”¨ç¨‹åºï¼Œæ—¨åœ¨å¸®åŠ©å­¦æ ¡ç®¡ç†äººå‘˜é«˜æ•ˆåœ°ç®¡ç†å­¦ç”Ÿä¿¡æ¯ã€‚ç³»ç»Ÿæä¾›äº†å­¦ç”Ÿä¿¡æ¯çš„å¢ã€åˆ ã€æ”¹ã€æŸ¥åŠŸèƒ½ï¼Œå¹¶æ”¯æŒç®¡ç†å‘˜å’Œå­¦ç”Ÿçš„ä¸åŒæƒé™ã€‚ç³»ç»Ÿå°†éƒ¨ç½²åœ¨Vercelä¸Šï¼Œä½¿ç”¨Neonæ•°æ®åº“è¿›è¡Œæ•°æ®å­˜å‚¨ï¼Œå¹¶ç¡®ä¿æ•°æ®çš„å®‰å…¨æ€§å’Œç³»ç»Ÿçš„å¯ç”¨æ€§ã€‚

åŠŸèƒ½è¦æ±‚ï¼š
1. ç®¡ç†å‘˜å¯ä»¥æŸ¥çœ‹æ‰€æœ‰å­¦ç”Ÿçš„ä¿¡æ¯ï¼›
2. ç®¡ç†å‘˜å¯ä»¥å¯¹å­¦ç”Ÿä¿¡æ¯è¿›è¡Œå¢åŠ ã€åˆ é™¤ã€ä¿®æ”¹å’ŒæŸ¥è¯¢æ“ä½œï¼›
3. å­¦ç”Ÿå¯ä»¥ç™»å½•åæŸ¥çœ‹æœ¬äººä¿¡æ¯ï¼›
4. ç³»ç»Ÿè¦èƒ½æ­£ç¡®å¤„ç†ä¸­æ–‡ï¼Œä¸èƒ½å‡ºç°ä¹±ç ï¼›
5. è¦æ±‚æœ‰äººæ€§åŒ–çš„ç”¨æˆ·ç•Œé¢è®¾è®¡ã€‚

æŠ€æœ¯çº¦æŸï¼š
- ä½¿ç”¨ HTMLã€CSSã€JavaScript
- åç«¯åŸºäº Vercel çš„ Serverless Functions å®ç°
- æ•°æ®åº“ä½¿ç”¨ Neon
- è®¿é—® Neon æ•°æ®åº“çš„æ–¹å¼ï¼šåœ¨ Vercel ä¸Šå®ç° Serverless Functionsï¼ˆä½¿ç”¨ç¯å¢ƒå˜é‡å®‰å…¨åœ°è¿æ¥ Neonï¼‰ï¼›
- ç®¡ç†å‘˜è´¦å·æ˜¯éœ€è¦é¢„ç½®ä¸€ä¸ªé»˜è®¤è´¦å·ï¼ˆç”¨æˆ·åï¼šadminï¼Œå¯†ç ï¼šadminï¼‰

è¾“å‡ºè¦æ±‚ï¼š
- å®Œæ•´å¯è¿è¡Œä»£ç 
- è¯¦ç»†æ³¨é‡Šè¯´æ˜
- é”™è¯¯å¤„ç†æœºåˆ¶
- æµ‹è¯•ç”¨ä¾‹
```


#### 3. ç”¨æˆ·ç•Œé¢è®¾è®¡å¼€å‘æç¤ºè¯


```
è¯·ä¸ºå­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿè®¾è®¡ç”¨æˆ·ç•Œé¢ã€‚

é¡¹ç›®èƒŒæ™¯ï¼š
å­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿæ˜¯ä¸€ä¸ªWebåº”ç”¨ç¨‹åºï¼Œæ—¨åœ¨å¸®åŠ©å­¦æ ¡ç®¡ç†äººå‘˜é«˜æ•ˆåœ°ç®¡ç†å­¦ç”Ÿä¿¡æ¯ã€‚ç³»ç»Ÿæä¾›äº†å­¦ç”Ÿä¿¡æ¯çš„å¢ã€åˆ ã€æ”¹ã€æŸ¥åŠŸèƒ½ï¼Œå¹¶æ”¯æŒç®¡ç†å‘˜å’Œå­¦ç”Ÿçš„ä¸åŒæƒé™ã€‚ç³»ç»Ÿå°†éƒ¨ç½²åœ¨Vercelä¸Šï¼Œä½¿ç”¨Neonæ•°æ®åº“è¿›è¡Œæ•°æ®å­˜å‚¨ï¼Œå¹¶ç¡®ä¿æ•°æ®çš„å®‰å…¨æ€§å’Œç³»ç»Ÿçš„å¯ç”¨æ€§ã€‚

åŠŸèƒ½è¦æ±‚ï¼š
1. ç™»å½•ç•Œé¢ï¼šç®¡ç†å‘˜è¾“å…¥ç”¨æˆ·åã€å¯†ç è¿›è¡Œç™»å½•ï¼›
2. æ³¨å†Œç•Œé¢ï¼šå­¦ç”Ÿè¾“å…¥ç”¨æˆ·åã€å¯†ç è¿›è¡Œæ³¨å†Œï¼›
3. å­¦ç”Ÿä¿¡æ¯ç®¡ç†ç•Œé¢ï¼šç®¡ç†å‘˜å¯ä»¥æŸ¥çœ‹æ‰€æœ‰å­¦ç”Ÿçš„ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥è¿›è¡Œå¢åŠ ã€åˆ é™¤ã€ä¿®æ”¹å’ŒæŸ¥è¯¢æ“ä½œï¼›
4. å­¦ç”Ÿä¿¡æ¯æŸ¥è¯¢ï¼šå­¦ç”Ÿè¾“å…¥å­¦å·å’Œå¯†ç ç™»å½•ï¼Œè·³è½¬åˆ°å­¦ç”Ÿä¿¡æ¯é¡µé¢ï¼Œå¯ä»¥æŸ¥çœ‹æœ¬å­¦ç”Ÿçš„ä¿¡æ¯ï¼›
5. è¦æ±‚æœ‰äººæ€§åŒ–çš„ç”¨æˆ·ç•Œé¢è®¾è®¡ï¼›
6. ç•Œé¢éœ€è¦ç»Ÿä¸€çš„ç§»åŠ¨ä¼˜å…ˆå“åº”å¼å¸ƒå±€ã€‚

æŠ€æœ¯çº¦æŸï¼š
- ä½¿ç”¨ HTMLã€CSSã€JavaScript
- åç«¯åŸºäº Vercel çš„ Serverless Functions å®ç°
- æ•°æ®åº“ä½¿ç”¨ Neon
- è®¿é—® Neon æ•°æ®åº“çš„æ–¹å¼ï¼šåœ¨ Vercel ä¸Šå®ç° Serverless Functionsï¼ˆä½¿ç”¨ç¯å¢ƒå˜é‡å®‰å…¨åœ°è¿æ¥ Neonï¼‰ï¼›
- ç®¡ç†å‘˜è´¦å·æ˜¯éœ€è¦é¢„ç½®ä¸€ä¸ªé»˜è®¤è´¦å·ï¼ˆç”¨æˆ·åï¼šadminï¼Œå¯†ç ï¼šadminï¼‰

è¾“å‡ºè¦æ±‚ï¼š
- å®Œæ•´å¯è¿è¡Œä»£ç 
- è¯¦ç»†æ³¨é‡Šè¯´æ˜
- é”™è¯¯å¤„ç†æœºåˆ¶
- æµ‹è¯•ç”¨ä¾‹
```


#### 4. æ•°æ®åº“è®¾è®¡å¼€å‘æç¤ºè¯


```
è¯·ä¸ºå­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿè®¾è®¡æ•°æ®åº“ç»“æ„ã€‚

é¡¹ç›®èƒŒæ™¯ï¼š
å­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿæ˜¯ä¸€ä¸ªWebåº”ç”¨ç¨‹åºï¼Œæ—¨åœ¨å¸®åŠ©å­¦æ ¡ç®¡ç†äººå‘˜é«˜æ•ˆåœ°ç®¡ç†å­¦ç”Ÿä¿¡æ¯ã€‚ç³»ç»Ÿæä¾›äº†å­¦ç”Ÿä¿¡æ¯çš„å¢ã€åˆ ã€æ”¹ã€æŸ¥åŠŸèƒ½ï¼Œå¹¶æ”¯æŒç®¡ç†å‘˜å’Œå­¦ç”Ÿçš„ä¸åŒæƒé™ã€‚ç³»ç»Ÿå°†éƒ¨ç½²åœ¨Vercelä¸Šï¼Œä½¿ç”¨Neonæ•°æ®åº“è¿›è¡Œæ•°æ®å­˜å‚¨ï¼Œå¹¶ç¡®ä¿æ•°æ®çš„å®‰å…¨æ€§å’Œç³»ç»Ÿçš„å¯ç”¨æ€§ã€‚

åŠŸèƒ½è¦æ±‚ï¼š
1. å­¦ç”Ÿè¡¨ï¼šåŒ…å«å­¦ç”Ÿçš„åŸºæœ¬ä¿¡æ¯ï¼Œå¦‚å­¦å·ã€å§“åã€æ€§åˆ«ã€å¹´é¾„ã€ç­çº§ã€ä¸“ä¸šç­‰ï¼›
2. ç®¡ç†å‘˜è¡¨ï¼šåŒ…å«ç®¡ç†å‘˜çš„åŸºæœ¬ä¿¡æ¯ï¼Œå¦‚ç”¨æˆ·åã€å¯†ç ï¼›
3. ç®¡ç†å‘˜è´¦å·æ˜¯éœ€è¦é¢„ç½®ä¸€ä¸ªé»˜è®¤è´¦å·ï¼ˆç”¨æˆ·åï¼šadminï¼Œå¯†ç ï¼šadminï¼‰ï¼›
4. ç³»ç»Ÿè¦èƒ½æ­£ç¡®å¤„ç†ä¸­æ–‡ï¼Œä¸èƒ½å‡ºç°ä¹±ç ã€‚

æŠ€æœ¯çº¦æŸï¼š
- ä½¿ç”¨ Neon æ•°æ®åº“
- è®¿é—® Neon æ•°æ®åº“çš„æ–¹å¼ï¼šåœ¨ Vercel ä¸Šå®ç° Serverless Functionsï¼ˆä½¿ç”¨ç¯å¢ƒå˜é‡å®‰å…¨åœ°è¿æ¥ Neonï¼‰ï¼›
- å¯†ç éœ€è¦åŠ å¯†å­˜å‚¨ï¼ˆå¦‚ bcryptï¼‰ã€‚

è¾“å‡ºè¦æ±‚ï¼š
- å®Œæ•´å¯è¿è¡Œä»£ç 
- è¯¦ç»†æ³¨é‡Šè¯´æ˜
- é”™è¯¯å¤„ç†æœºåˆ¶
- æµ‹è¯•ç”¨ä¾‹
```


#### 5. é›†æˆæµ‹è¯•å¼€å‘æç¤ºè¯


```
è¯·ä¸ºå­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿç¼–å†™é›†æˆæµ‹è¯•ç”¨ä¾‹ã€‚

é¡¹ç›®èƒŒæ™¯ï¼š
å­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿæ˜¯ä¸€ä¸ªWebåº”ç”¨ç¨‹åºï¼Œæ—¨åœ¨å¸®åŠ©å­¦æ ¡ç®¡ç†äººå‘˜é«˜æ•ˆåœ°ç®¡ç†å­¦ç”Ÿä¿¡æ¯ã€‚ç³»ç»Ÿæä¾›äº†å­¦ç”Ÿä¿¡æ¯çš„å¢ã€åˆ ã€æ”¹ã€æŸ¥åŠŸèƒ½ï¼Œå¹¶æ”¯æŒç®¡ç†å‘˜å’Œå­¦ç”Ÿçš„ä¸åŒæƒé™ã€‚ç³»ç»Ÿå°†éƒ¨ç½²åœ¨Vercelä¸Šï¼Œä½¿ç”¨Neonæ•°æ®åº“è¿›è¡Œæ•°æ®å­˜å‚¨ï¼Œå¹¶ç¡®ä¿æ•°æ®çš„å®‰å…¨æ€§å’Œç³»ç»Ÿçš„å¯ç”¨æ€§ã€‚

åŠŸèƒ½è¦æ±‚ï¼š
1. ç®¡ç†å‘˜å¯ä»¥æŸ¥çœ‹æ‰€æœ‰å­¦ç”Ÿçš„ä¿¡æ¯ï¼›
2. ç®¡ç†å‘˜å¯ä»¥å¯¹å­¦ç”Ÿä¿¡æ¯è¿›è¡Œå¢åŠ ã€åˆ é™¤ã€ä¿®æ”¹å’ŒæŸ¥è¯¢æ“ä½œï¼›
3. å­¦ç”Ÿå¯ä»¥ç™»å½•åæŸ¥çœ‹æœ¬äººä¿¡æ¯ï¼›
4. ç³»ç»Ÿè¦èƒ½æ­£ç¡®å¤„ç†ä¸­æ–‡ï¼Œä¸èƒ½å‡ºç°ä¹±ç ï¼›
5. è¦æ±‚æœ‰äººæ€§åŒ–çš„ç”¨æˆ·ç•Œé¢è®¾è®¡ã€‚

æŠ€æœ¯çº¦æŸï¼š
- ä½¿ç”¨ HTMLã€CSSã€JavaScript
- åç«¯åŸºäº Vercel çš„ Serverless Functions å®ç°
- æ•°æ®åº“ä½¿ç”¨ Neon
- è®¿é—® Neon æ•°æ®åº“çš„æ–¹å¼ï¼šåœ¨ Vercel ä¸Šå®ç° Serverless Functionsï¼ˆä½¿ç”¨ç¯å¢ƒå˜é‡å®‰å…¨åœ°è¿æ¥ Neonï¼‰ï¼›
- ç®¡ç†å‘˜è´¦å·æ˜¯éœ€è¦é¢„ç½®ä¸€ä¸ªé»˜è®¤è´¦å·ï¼ˆç”¨æˆ·åï¼šadminï¼Œå¯†ç ï¼šadminï¼‰

è¾“å‡ºè¦æ±‚ï¼š
- å®Œæ•´å¯è¿è¡Œä»£ç 
- è¯¦ç»†æ³¨é‡Šè¯´æ˜
- é”™è¯¯å¤„ç†æœºåˆ¶
- æµ‹è¯•ç”¨ä¾‹
```


### æŠ€æœ¯æ ˆå¯¹æ¯”è¡¨æ ¼

| æŠ€æœ¯æ ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ |
| --- | --- | --- |
| HTML/CSS/JavaScript | å‰ç«¯å¼€å‘æˆç†Ÿï¼Œæ˜“äºä¸Šæ‰‹ | åŠŸèƒ½æœ‰é™ï¼Œå¤æ‚åº”ç”¨éœ€è¦æ›´å¤šæ¡†æ¶æ”¯æŒ |
| Vercel | éƒ¨ç½²ç®€å•ï¼Œæ”¯æŒServerless | å…è´¹ç‰ˆæœ‰ä½¿ç”¨é™åˆ¶ |
| Neon | äº‘ç«¯æ•°æ®åº“ï¼Œæ˜“äºæ‰©å±• | æ–°æŠ€æœ¯ï¼Œç¤¾åŒºæ”¯æŒç›¸å¯¹è¾ƒå°‘ |

### é¡¹ç›®é‡Œç¨‹ç¢‘æ—¶é—´è¡¨

| é‡Œç¨‹ç¢‘ | æ—¥æœŸ | æè¿° |
| --- | --- | --- |
| éœ€æ±‚è°ƒç ” | 2025-11-17 | æ”¶é›†å’Œæ•´ç†ç”¨æˆ·éœ€æ±‚ |
| éœ€æ±‚æ•´ç† | 2025-11-21 | ç¼–å†™è¯¦ç»†çš„éœ€æ±‚æ–‡æ¡£ |
| æ¶æ„è®¾è®¡ | 2025-11-28 | è®¾è®¡ç³»ç»Ÿæ•´ä½“æ¶æ„ |
| UIè®¾è®¡ | 2025-12-03 | è®¾è®¡ç”¨æˆ·ç•Œé¢ |
| åç«¯å¼€å‘ | 2025-12-17 | å®ç° Vercel çš„ Serverless Functions |
| å‰ç«¯å¼€å‘ | 2025-12-17 | å¼€å‘å‰ç«¯é¡µé¢ |
| é›†æˆæµ‹è¯• | 2025-12-24 | è¿›è¡Œç³»ç»Ÿé›†æˆæµ‹è¯• |
| éƒ¨ç½²å‡†å¤‡ | 2025-12-27 | é…ç½® Vercel ç¯å¢ƒå˜é‡ |
| æ­£å¼ä¸Šçº¿ | 2025-12-29 | å°†ç³»ç»Ÿéƒ¨ç½²åˆ° Vercel |

### æ¶æ„å›¾


```
flowchart TD
    A["ç”¨æˆ·ç•Œé¢"]  -->  B["å‰ç«¯é€»è¾‘"]
    B  -->  C[Vercel Serverless Functions]
    C  -->  D[Neon Database]
    C  -->  E[Session Management]
    F["ç¼“å­˜"]  -->  C
```


### æµç¨‹å›¾


```
flowchart TD
    Start([å¼€å§‹])  -->  Login[ç®¡ç†å‘˜ç™»å½•]
    Login  -->  Validate{éªŒè¯ç”¨æˆ·åå’Œå¯†ç }
    Validate  --> |æœ‰æ•ˆ| AdminPage[å­¦ç”Ÿä¿¡æ¯ç®¡ç†ç•Œé¢]
    Validate  --> |æ— æ•ˆ| Error[æ˜¾ç¤ºé”™è¯¯]
    AdminPage  -->  Add[å¢åŠ å­¦ç”Ÿä¿¡æ¯]
    AdminPage  -->  Delete[åˆ é™¤å­¦ç”Ÿä¿¡æ¯]
    AdminPage  -->  Update[ä¿®æ”¹å­¦ç”Ÿä¿¡æ¯]
    AdminPage  -->  Query[æŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯]
    StudentLogin[å­¦ç”Ÿç™»å½•]  -->  ValidateStudent{éªŒè¯å­¦å·å’Œå¯†ç }
    ValidateStudent  --> |æœ‰æ•ˆ| StudentPage[å­¦ç”Ÿä¿¡æ¯é¡µé¢]
    ValidateStudent  --> |æ— æ•ˆ| Error
    StudentPage  -->  View[æŸ¥çœ‹ä¸ªäººä¿¡æ¯]
    Error  -->  Login
    Error  -->  StudentLogin
```


### ç”˜ç‰¹å›¾


```
gantt
    title é¡¹ç›®å¼€å‘ç”˜ç‰¹å›¾
    dateFormat YYYY-MM-DD
    axisFormat %m-%d
    
    section éœ€æ±‚åˆ†æ
    éœ€æ±‚è°ƒç ”     :done, req1, 2025-11-17, 3d
    éœ€æ±‚æ•´ç†     :done, req2, after req1, 4d
    
    section ç³»ç»Ÿè®¾è®¡
    æ¶æ„è®¾è®¡     :active, design1, after req2, 7d
    UIè®¾è®¡       :design2, after design1, 5d
    
    section å¼€å‘å®æ–½
    åç«¯å¼€å‘     :dev1, after design2, 14d
    å‰ç«¯å¼€å‘     :dev2, after design2, 14d
    é›†æˆæµ‹è¯•     :test1, after dev1, 7d
    
    section éƒ¨ç½²ä¸Šçº¿
    éƒ¨ç½²å‡†å¤‡     :deploy1, after test1, 3d
    æ­£å¼ä¸Šçº¿     :deploy2, after deploy1, 2d
```


</div>
</file>

<file path=".env.example">
# Neon æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²
DATABASE_URL=postgresql://username:password@ep-xxxxx.us-east-1.aws.neon.tech/dbname?sslmode=require

# JWT å¯†é’¥ï¼ˆç”¨äºä¼šè¯ç®¡ç†ï¼‰
JWT_SECRET=your-secret-key-here

# åº”ç”¨é…ç½®
NODE_ENV=development
</file>

<file path=".gitignore">
# Dependencies
node_modules/
npm-debug.log*
yarn-debug.log*
yarn-error.log*

# Environment variables
.env
.env.local
.env.development.local
.env.test.local
.env.production.local

# Vercel
.vercel

# Build outputs
dist/
build/
.cache/

# IDE
.vscode/
.idea/
*.swp
*.swo
*~

# OS
.DS_Store
Thumbs.db

# Logs
logs/
*.log

# Runtime data
pids/
*.pid
*.seed

# Coverage directory used by tools like istanbul
coverage/

# Temporary folders
tmp/
temp/
</file>

<file path="admin.html">
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç®¡ç†å‘˜ - å­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿ</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="container">
        <!-- å¯¼èˆªæ  -->
        <nav class="navbar">
            <h1>å­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿ</h1>
            <div class="user-info">
                <span id="adminUsername">ç®¡ç†å‘˜</span>
                <button id="logoutBtn" class="btn btn-secondary">é€€å‡ºç™»å½•</button>
            </div>
        </nav>

        <!-- ç®¡ç†å‘˜ä»ªè¡¨æ¿ -->
        <main class="dashboard">
            <div class="dashboard-header">
                <h1>å­¦ç”Ÿä¿¡æ¯ç®¡ç†</h1>
                <button id="addStudentBtn" class="btn btn-success">æ·»åŠ å­¦ç”Ÿ</button>
            </div>

            <!-- æœç´¢å’Œç­›é€‰æ  -->
            <div class="actions-bar">
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="æœç´¢å­¦ç”Ÿå§“åã€å­¦å·æˆ–ç­çº§...">
                    <button id="searchBtn">æœç´¢</button>
                </div>
                <div class="filter-box">
                    <select id="classFilter">
                        <option value="">æ‰€æœ‰ç­çº§</option>
                    </select>
                    <select id="majorFilter">
                        <option value="">æ‰€æœ‰ä¸“ä¸š</option>
                    </select>
                    <button id="filterBtn">ç­›é€‰</button>
                    <button id="resetBtn">é‡ç½®</button>
                </div>
            </div>

            <!-- å­¦ç”Ÿä¿¡æ¯è¡¨æ ¼ -->
            <div class="table-container">
                <table id="studentsTable">
                    <thead>
                        <tr>
                            <th>å­¦å·</th>
                            <th>å§“å</th>
                            <th>æ€§åˆ«</th>
                            <th>å¹´é¾„</th>
                            <th>ç­çº§</th>
                            <th>ä¸“ä¸š</th>
                            <th>ç”µè¯</th>
                            <th>é‚®ç®±</th>
                            <th>æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody id="studentsTableBody">
                        <!-- å­¦ç”Ÿæ•°æ®å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
                    </tbody>
                </table>
                <div id="noDataMessage" class="no-data" style="display: none;">
                    <p>æš‚æ— å­¦ç”Ÿæ•°æ®</p>
                </div>
            </div>

            <!-- åˆ†é¡µæ§ä»¶ -->
            <div class="pagination">
                <button id="prevPageBtn">ä¸Šä¸€é¡µ</button>
                <span id="pageInfo">ç¬¬ 1 é¡µï¼Œå…± 1 é¡µ</span>
                <button id="nextPageBtn">ä¸‹ä¸€é¡µ</button>
            </div>
        </main>

        <!-- æ·»åŠ /ç¼–è¾‘å­¦ç”Ÿæ¨¡æ€æ¡† -->
        <div id="studentModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="modalTitle">æ·»åŠ å­¦ç”Ÿ</h2>
                    <button class="modal-close">&times;</button>
                </div>
                <form id="studentForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="modalStudentId">å­¦å·</label>
                            <input type="text" id="modalStudentId" name="studentId" required>
                        </div>
                        <div class="form-group">
                            <label for="modalName">å§“å</label>
                            <input type="text" id="modalName" name="name" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="modalGender">æ€§åˆ«</label>
                            <select id="modalGender" name="gender">
                                <option value="">è¯·é€‰æ‹©</option>
                                <option value="ç”·">ç”·</option>
                                <option value="å¥³">å¥³</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="modalAge">å¹´é¾„</label>
                            <input type="number" id="modalAge" name="age" min="15" max="50">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="modalClass">ç­çº§</label>
                            <input type="text" id="modalClass" name="className">
                        </div>
                        <div class="form-group">
                            <label for="modalMajor">ä¸“ä¸š</label>
                            <input type="text" id="modalMajor" name="major">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="modalPhone">ç”µè¯</label>
                            <input type="tel" id="modalPhone" name="phone">
                        </div>
                        <div class="form-group">
                            <label for="modalEmail">é‚®ç®±</label>
                            <input type="email" id="modalEmail" name="email">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="modalPassword">å¯†ç </label>
                        <input type="password" id="modalPassword" name="password" placeholder="ç•™ç©ºåˆ™ä¸ä¿®æ”¹å¯†ç ">
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">ä¿å­˜</button>
                        <button type="button" class="btn btn-secondary modal-close">å–æ¶ˆ</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- åˆ é™¤ç¡®è®¤æ¨¡æ€æ¡† -->
        <div id="deleteModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>ç¡®è®¤åˆ é™¤</h2>
                    <button class="modal-close">&times;</button>
                </div>
                <p>ç¡®å®šè¦åˆ é™¤å­¦ç”Ÿ <strong id="deleteStudentName"></strong> çš„ä¿¡æ¯å—ï¼Ÿ</p>
                <div class="form-actions">
                    <button id="confirmDeleteBtn" class="btn btn-danger">ç¡®è®¤åˆ é™¤</button>
                    <button class="btn btn-secondary modal-close">å–æ¶ˆ</button>
                </div>
            </div>
        </div>

        <!-- æ¶ˆæ¯æç¤ºåŒºåŸŸ -->
        <div id="messageArea" class="message-area"></div>
    </div>

    <script src="js/admin.js"></script>
</body>
</html>
</file>

<file path="api/auth/admin/login.js">
// ç®¡ç†å‘˜ç™»å½•API
const { Pool } = require('pg');

const pool = new Pool({
    connectionString: process.env.DATABASE_URL,
    ssl: {
        rejectUnauthorized: false
    }
});

module.exports = async (req, res) => {
    // è®¾ç½®CORSå¤´
    res.setHeader('Access-Control-Allow-Origin', '*');
    res.setHeader('Access-Control-Allow-Methods', 'POST, OPTIONS');
    res.setHeader('Access-Control-Allow-Headers', 'Content-Type');

    if (req.method === 'OPTIONS') {
        return res.status(200).end();
    }

    if (req.method !== 'POST') {
        return res.status(405).json({ success: false, message: 'æ–¹æ³•ä¸å…è®¸' });
    }

    try {
        const { username, password } = req.body;

        if (!username || !password) {
            return res.status(400).json({
                success: false,
                message: 'ç”¨æˆ·åå’Œå¯†ç ä¸èƒ½ä¸ºç©º'
            });
        }

        // æŸ¥è¯¢ç®¡ç†å‘˜ä¿¡æ¯
        const query = 'SELECT id, username, password FROM admins WHERE username = $1';
        const result = await pool.query(query, [username]);

        if (result.rows.length === 0) {
            return res.status(401).json({
                success: false,
                message: 'ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯'
            });
        }

        const admin = result.rows[0];

        // æ³¨æ„ï¼šè¿™é‡Œä¸ºäº†ç®€åŒ–ï¼Œç›´æ¥æ¯”è¾ƒæ˜æ–‡å¯†ç 
        // å®é™…ç”Ÿäº§ç¯å¢ƒä¸­åº”è¯¥ä½¿ç”¨ bcrypt ç­‰åŠ å¯†æ–¹å¼
        if (admin.password !== password) {
            return res.status(401).json({
                success: false,
                message: 'ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯'
            });
        }

        // è¿”å›æˆåŠŸå“åº”ï¼ˆä¸åŒ…å«å¯†ç ï¼‰
        res.status(200).json({
            success: true,
            message: 'ç™»å½•æˆåŠŸ',
            admin: {
                id: admin.id,
                username: admin.username
            }
        });

    } catch (error) {
        console.error('ç®¡ç†å‘˜ç™»å½•é”™è¯¯:', error);
        res.status(500).json({
            success: false,
            message: 'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯'
        });
    }
};
</file>

<file path="api/auth/student/login.js">
// å­¦ç”Ÿç™»å½•API
const { Pool } = require('pg');

const pool = new Pool({
    connectionString: process.env.DATABASE_URL,
    ssl: {
        rejectUnauthorized: false
    }
});

module.exports = async (req, res) => {
    // è®¾ç½®CORSå¤´
    res.setHeader('Access-Control-Allow-Origin', '*');
    res.setHeader('Access-Control-Allow-Methods', 'POST, OPTIONS');
    res.setHeader('Access-Control-Allow-Headers', 'Content-Type');

    if (req.method === 'OPTIONS') {
        return res.status(200).end();
    }

    if (req.method !== 'POST') {
        return res.status(405).json({ success: false, message: 'æ–¹æ³•ä¸å…è®¸' });
    }

    try {
        const { studentId, password } = req.body;

        if (!studentId || !password) {
            return res.status(400).json({
                success: false,
                message: 'å­¦å·å’Œå¯†ç ä¸èƒ½ä¸ºç©º'
            });
        }

        // æŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯
        const query = `
            SELECT student_id, name, gender, age, class_name, major, phone, email, password
            FROM students
            WHERE student_id = $1
        `;
        const result = await pool.query(query, [studentId]);

        if (result.rows.length === 0) {
            return res.status(401).json({
                success: false,
                message: 'å­¦å·æˆ–å¯†ç é”™è¯¯'
            });
        }

        const student = result.rows[0];

        // æ³¨æ„ï¼šè¿™é‡Œä¸ºäº†ç®€åŒ–ï¼Œç›´æ¥æ¯”è¾ƒæ˜æ–‡å¯†ç 
        // å®é™…ç”Ÿäº§ç¯å¢ƒä¸­åº”è¯¥ä½¿ç”¨ bcrypt ç­‰åŠ å¯†æ–¹å¼
        if (student.password !== password) {
            return res.status(401).json({
                success: false,
                message: 'å­¦å·æˆ–å¯†ç é”™è¯¯'
            });
        }

        // è¿”å›æˆåŠŸå“åº”ï¼ˆä¸åŒ…å«å¯†ç ï¼‰
        res.status(200).json({
            success: true,
            message: 'ç™»å½•æˆåŠŸ',
            student: {
                student_id: student.student_id,
                name: student.name,
                gender: student.gender,
                age: student.age,
                class_name: student.class_name,
                major: student.major,
                phone: student.phone,
                email: student.email
            }
        });

    } catch (error) {
        console.error('å­¦ç”Ÿç™»å½•é”™è¯¯:', error);
        res.status(500).json({
            success: false,
            message: 'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯'
        });
    }
};
</file>

<file path="api/auth/student/register.js">
// å­¦ç”Ÿæ³¨å†ŒAPI
const { Pool } = require('pg');

const pool = new Pool({
    connectionString: process.env.DATABASE_URL,
    ssl: {
        rejectUnauthorized: false
    }
});

module.exports = async (req, res) => {
    // è®¾ç½®CORSå¤´
    res.setHeader('Access-Control-Allow-Origin', '*');
    res.setHeader('Access-Control-Allow-Methods', 'POST, OPTIONS');
    res.setHeader('Access-Control-Allow-Headers', 'Content-Type');

    if (req.method === 'OPTIONS') {
        return res.status(200).end();
    }

    if (req.method !== 'POST') {
        return res.status(405).json({ success: false, message: 'æ–¹æ³•ä¸å…è®¸' });
    }

    try {
        const {
            studentId,
            name,
            gender,
            age,
            className,
            major,
            phone,
            email,
            password
        } = req.body;

        // éªŒè¯å¿…å¡«å­—æ®µ
        if (!studentId || !name || !gender || !age || !className || !major || !phone || !email || !password) {
            return res.status(400).json({
                success: false,
                message: 'è¯·å¡«å†™å®Œæ•´çš„æ³¨å†Œä¿¡æ¯'
            });
        }

        // éªŒè¯å¹´é¾„èŒƒå›´
        if (age < 15 || age > 50) {
            return res.status(400).json({
                success: false,
                message: 'å¹´é¾„å¿…é¡»åœ¨15-50å²ä¹‹é—´'
            });
        }

        // éªŒè¯é‚®ç®±æ ¼å¼
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
            return res.status(400).json({
                success: false,
                message: 'è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€'
            });
        }

        // æ£€æŸ¥å­¦å·æ˜¯å¦å·²å­˜åœ¨
        const checkQuery = 'SELECT student_id FROM students WHERE student_id = $1';
        const checkResult = await pool.query(checkQuery, [studentId]);

        if (checkResult.rows.length > 0) {
            return res.status(409).json({
                success: false,
                message: 'è¯¥å­¦å·å·²è¢«æ³¨å†Œ'
            });
        }

        // æ’å…¥æ–°å­¦ç”Ÿè®°å½•
        const insertQuery = `
            INSERT INTO students (
                student_id, name, gender, age, class_name, major, phone, email, password
            ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)
            RETURNING student_id, name, gender, age, class_name, major, phone, email
        `;

        const insertResult = await pool.query(insertQuery, [
            studentId, name, gender, age, className, major, phone, email, password
        ]);

        const newStudent = insertResult.rows[0];

        res.status(201).json({
            success: true,
            message: 'æ³¨å†ŒæˆåŠŸ',
            student: newStudent
        });

    } catch (error) {
        console.error('å­¦ç”Ÿæ³¨å†Œé”™è¯¯:', error);
        res.status(500).json({
            success: false,
            message: 'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯'
        });
    }
};
</file>

<file path="api/students/index.js">
// å­¦ç”Ÿä¿¡æ¯ç®¡ç†API - è·å–æ‰€æœ‰å­¦ç”Ÿä¿¡æ¯
const { Pool } = require('pg');

const pool = new Pool({
    connectionString: process.env.DATABASE_URL,
    ssl: {
        rejectUnauthorized: false
    }
});

module.exports = async (req, res) => {
    // è®¾ç½®CORSå¤´
    res.setHeader('Access-Control-Allow-Origin', '*');
    res.setHeader('Access-Control-Allow-Methods', 'GET, POST, OPTIONS');
    res.setHeader('Access-Control-Allow-Headers', 'Content-Type');

    if (req.method === 'OPTIONS') {
        return res.status(200).end();
    }

    if (req.method === 'GET') {
        try {
            // è·å–æŸ¥è¯¢å‚æ•°
            const { search, class: className, major } = req.query;

            let query = `
                SELECT student_id, name, gender, age, class_name, major, phone, email, created_at, updated_at
                FROM students
                WHERE 1=1
            `;

            const params = [];
            let paramIndex = 1;

            // æ·»åŠ æœç´¢æ¡ä»¶
            if (search) {
                query += ` AND (
                    name ILIKE $${paramIndex} OR
                    student_id ILIKE $${paramIndex} OR
                    class_name ILIKE $${paramIndex}
                )`;
                params.push(`%${search}%`);
                paramIndex++;
            }

            // æ·»åŠ ç­çº§ç­›é€‰
            if (className) {
                query += ` AND class_name ILIKE $${paramIndex}`;
                params.push(`%${className}%`);
                paramIndex++;
            }

            // æ·»åŠ ä¸“ä¸šç­›é€‰
            if (major) {
                query += ` AND major ILIKE $${paramIndex}`;
                params.push(`%${major}%`);
                paramIndex++;
            }

            // æ’åº
            query += ` ORDER BY student_id ASC`;

            const result = await pool.query(query, params);

            res.status(200).json({
                success: true,
                message: 'è·å–å­¦ç”Ÿä¿¡æ¯æˆåŠŸ',
                students: result.rows,
                total: result.rows.length
            });

        } catch (error) {
            console.error('è·å–å­¦ç”Ÿä¿¡æ¯é”™è¯¯:', error);
            res.status(500).json({
                success: false,
                message: 'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯'
            });
        }
    } else if (req.method === 'POST') {
        // æ·»åŠ æ–°å­¦ç”Ÿï¼ˆç”±ç®¡ç†å‘˜æ“ä½œï¼‰
        try {
            const {
                studentId,
                name,
                gender,
                age,
                className,
                major,
                phone,
                email,
                password
            } = req.body;

            // éªŒè¯å¿…å¡«å­—æ®µ
            if (!studentId || !name || !password) {
                return res.status(400).json({
                    success: false,
                    message: 'å­¦å·ã€å§“åå’Œå¯†ç ä¸èƒ½ä¸ºç©º'
                });
            }

            // æ£€æŸ¥å­¦å·æ˜¯å¦å·²å­˜åœ¨
            const checkQuery = 'SELECT student_id FROM students WHERE student_id = $1';
            const checkResult = await pool.query(checkQuery, [studentId]);

            if (checkResult.rows.length > 0) {
                return res.status(409).json({
                    success: false,
                    message: 'è¯¥å­¦å·å·²å­˜åœ¨'
                });
            }

            // æ’å…¥æ–°å­¦ç”Ÿ
            const insertQuery = `
                INSERT INTO students (
                    student_id, name, gender, age, class_name, major, phone, email, password
                ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)
                RETURNING student_id, name, gender, age, class_name, major, phone, email, created_at
            `;

            const insertResult = await pool.query(insertQuery, [
                studentId, name, gender || null, age || null, className || null,
                major || null, phone || null, email || null, password
            ]);

            res.status(201).json({
                success: true,
                message: 'æ·»åŠ å­¦ç”ŸæˆåŠŸ',
                student: insertResult.rows[0]
            });

        } catch (error) {
            console.error('æ·»åŠ å­¦ç”Ÿé”™è¯¯:', error);
            res.status(500).json({
                success: false,
                message: 'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯'
            });
        }
    } else {
        res.status(405).json({
            success: false,
            message: 'æ–¹æ³•ä¸å…è®¸'
        });
    }
};
</file>

<file path="css/styles.css">
/* å…¨å±€æ ·å¼ */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    line-height: 1.6;
    color: #333;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    min-height: 100vh;
}

.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
    min-height: 100vh;
}

/* å¯¼èˆªæ  */
.navbar {
    background: rgba(255, 255, 255, 0.95);
    padding: 1rem 2rem;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    backdrop-filter: blur(10px);
}

.navbar h1 {
    color: #2c3e50;
    font-size: 1.8rem;
    text-align: center;
}

/* ä¸»è¦å†…å®¹åŒºåŸŸ */
.main-content {
    padding: 2rem 0;
    min-height: calc(100vh - 80px);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}

/* è®¤è¯é€‰æ‹©å™¨ */
.auth-selector {
    margin-bottom: 2rem;
    text-align: center;
}

.selector-buttons {
    display: flex;
    gap: 1rem;
    justify-content: center;
    flex-wrap: wrap;
}

.selector-btn {
    padding: 1rem 2rem;
    background: rgba(255, 255, 255, 0.9);
    border: 2px solid transparent;
    border-radius: 50px;
    cursor: pointer;
    font-size: 1rem;
    transition: all 0.3s ease;
    font-weight: 500;
    color: #666;
}

.selector-btn:hover {
    background: rgba(255, 255, 255, 1);
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
}

.selector-btn.active {
    background: #fff;
    color: #667eea;
    border-color: #667eea;
    font-weight: 600;
}

/* è®¤è¯è¡¨å• */
.auth-form {
    display: none;
    width: 100%;
    max-width: 500px;
    animation: fadeIn 0.3s ease;
}

.auth-form.active {
    display: block;
}

.form-container {
    background: rgba(255, 255, 255, 0.95);
    padding: 2.5rem;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    backdrop-filter: blur(10px);
}

.form-container h2 {
    text-align: center;
    margin-bottom: 2rem;
    color: #2c3e50;
    font-size: 1.8rem;
}

/* è¡¨å•ç»„ */
.form-group {
    margin-bottom: 1.5rem;
}

.form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
    margin-bottom: 1.5rem;
}

.form-group label {
    display: block;
    margin-bottom: 0.5rem;
    color: #555;
    font-weight: 500;
}

.form-group input,
.form-group select {
    width: 100%;
    padding: 0.8rem 1rem;
    border: 2px solid #e1e8ed;
    border-radius: 10px;
    font-size: 1rem;
    transition: all 0.3s ease;
    background: #fff;
}

.form-group input:focus,
.form-group select:focus {
    outline: none;
    border-color: #667eea;
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}

/* æŒ‰é’® */
.btn {
    padding: 0.8rem 2rem;
    border: none;
    border-radius: 10px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    width: 100%;
}

.btn-primary {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
}

.btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
}

.btn-secondary {
    background: #6c757d;
    color: white;
}

.btn-secondary:hover {
    background: #5a6268;
}

.btn-danger {
    background: #dc3545;
    color: white;
}

.btn-danger:hover {
    background: #c82333;
}

.btn-success {
    background: #28a745;
    color: white;
}

.btn-success:hover {
    background: #218838;
}

/* è¡¨å•æç¤º */
.form-hint {
    margin-top: 1rem;
    text-align: center;
    font-size: 0.9rem;
    color: #666;
}

/* æ¶ˆæ¯æç¤ºåŒºåŸŸ */
.message-area {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 1000;
    max-width: 400px;
}

.message {
    padding: 1rem 1.5rem;
    margin-bottom: 1rem;
    border-radius: 10px;
    animation: slideIn 0.3s ease;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
}

.message.success {
    background: #d4edda;
    color: #155724;
    border: 1px solid #c3e6cb;
}

.message.error {
    background: #f8d7da;
    color: #721c24;
    border: 1px solid #f5c6cb;
}

.message.info {
    background: #d1ecf1;
    color: #0c5460;
    border: 1px solid #bee5eb;
}

/* åŠ¨ç”»æ•ˆæœ */
@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes slideIn {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 768px) {
    .container {
        padding: 0 10px;
    }

    .navbar {
        padding: 1rem;
    }

    .navbar h1 {
        font-size: 1.5rem;
    }

    .form-container {
        padding: 1.5rem;
        margin: 0 10px;
    }

    .form-row {
        grid-template-columns: 1fr;
        gap: 0;
    }

    .selector-buttons {
        flex-direction: column;
        width: 100%;
        max-width: 300px;
    }

    .selector-btn {
        width: 100%;
    }

    .message-area {
        left: 10px;
        right: 10px;
        max-width: none;
    }
}

/* ç®¡ç†å‘˜å’Œå­¦ç”Ÿé¡µé¢æ ·å¼ */
.dashboard {
    background: rgba(255, 255, 255, 0.95);
    padding: 2rem;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    backdrop-filter: blur(10px);
}

.dashboard-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    flex-wrap: wrap;
    gap: 1rem;
}

.dashboard-header h1 {
    color: #2c3e50;
}

.user-info {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.user-info span {
    color: #666;
}

/* è¡¨æ ¼æ ·å¼ */
.table-container {
    overflow-x: auto;
    margin: 2rem 0;
}

table {
    width: 100%;
    border-collapse: collapse;
    background: white;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

th, td {
    padding: 1rem;
    text-align: left;
    border-bottom: 1px solid #e1e8ed;
}

th {
    background: #f8f9fa;
    font-weight: 600;
    color: #2c3e50;
}

tr:hover {
    background: #f8f9fa;
}

/* æœç´¢å’Œæ“ä½œæ  */
.actions-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin: 2rem 0;
    flex-wrap: wrap;
    gap: 1rem;
}

.search-box {
    display: flex;
    gap: 0.5rem;
    flex: 1;
    max-width: 400px;
}

.search-box input {
    flex: 1;
    padding: 0.8rem 1rem;
    border: 2px solid #e1e8ed;
    border-radius: 10px;
    font-size: 1rem;
}

.search-box button {
    padding: 0.8rem 1.5rem;
    background: #667eea;
    color: white;
    border: none;
    border-radius: 10px;
    cursor: pointer;
}

/* æ¨¡æ€æ¡†æ ·å¼ */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 2000;
}

.modal.active {
    display: flex;
    justify-content: center;
    align-items: center;
}

.modal-content {
    background: white;
    padding: 2rem;
    border-radius: 20px;
    max-width: 500px;
    width: 90%;
    max-height: 90vh;
    overflow-y: auto;
    animation: fadeIn 0.3s ease;
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
}

.modal-close {
    background: none;
    border: none;
    font-size: 1.5rem;
    cursor: pointer;
    color: #666;
}

/* åŠ è½½åŠ¨ç”» */
.loading {
    display: inline-block;
    width: 20px;
    height: 20px;
    border: 3px solid #f3f3f3;
    border-top: 3px solid #667eea;
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* å­¦ç”Ÿé¡µé¢æ ·å¼ */
.profile-card {
    background: white;
    border-radius: 20px;
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
    overflow: hidden;
    margin-bottom: 2rem;
}

.profile-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 2rem;
    display: flex;
    align-items: center;
    gap: 2rem;
}

.profile-avatar {
    flex-shrink: 0;
}

.avatar-placeholder {
    width: 80px;
    height: 80px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2rem;
    font-weight: bold;
    border: 3px solid rgba(255, 255, 255, 0.3);
}

.profile-basic-info h2 {
    margin: 0 0 0.5rem 0;
    font-size: 1.8rem;
}

.profile-basic-info p {
    margin: 0.25rem 0;
    opacity: 0.9;
}

.profile-details {
    padding: 2rem;
}

.detail-group {
    margin-bottom: 2rem;
}

.detail-group h3 {
    color: #2c3e50;
    margin-bottom: 1rem;
    font-size: 1.2rem;
    border-bottom: 2px solid #e1e8ed;
    padding-bottom: 0.5rem;
}

.detail-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1.5rem;
}

.detail-item {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.detail-item label {
    color: #666;
    font-weight: 600;
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.detail-item span {
    color: #2c3e50;
    font-size: 1.1rem;
    font-weight: 500;
}

/* å¿«æ·æ“ä½œ */
.quick-actions {
    background: white;
    border-radius: 20px;
    padding: 2rem;
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
}

.quick-actions h3 {
    color: #2c3e50;
    margin-bottom: 1.5rem;
    font-size: 1.3rem;
}

.actions-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
}

/* è¡¨æ ¼æ“ä½œæŒ‰é’® */
.actions {
    display: flex;
    gap: 0.5rem;
    justify-content: center;
}

.btn-sm {
    padding: 0.4rem 0.8rem;
    font-size: 0.85rem;
}

/* åˆ†é¡µæ ·å¼ */
.pagination {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 1rem;
    margin: 2rem 0;
}

.pagination button {
    padding: 0.6rem 1.2rem;
    background: #667eea;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.pagination button:hover:not(:disabled) {
    background: #5a6fd8;
    transform: translateY(-1px);
}

.pagination button:disabled {
    background: #ccc;
    cursor: not-allowed;
    transform: none;
}

.pagination span {
    color: #666;
    font-weight: 500;
}

/* ç­›é€‰æ¡†æ ·å¼ */
.filter-box {
    display: flex;
    gap: 0.5rem;
    align-items: center;
    flex-wrap: wrap;
}

.filter-box select {
    padding: 0.8rem 1rem;
    border: 2px solid #e1e8ed;
    border-radius: 10px;
    font-size: 1rem;
    background: white;
    min-width: 150px;
}

.filter-box button {
    padding: 0.8rem 1.2rem;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    font-size: 1rem;
    transition: all 0.3s ease;
}

.filter-box button:first-of-type {
    background: #667eea;
    color: white;
}

.filter-box button:last-of-type {
    background: #6c757d;
    color: white;
}

.filter-box button:hover {
    transform: translateY(-1px);
    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
}

/* è¡¨å•æ“ä½œæŒ‰é’® */
.form-actions {
    display: flex;
    gap: 1rem;
    justify-content: flex-end;
    margin-top: 2rem;
    padding-top: 1rem;
    border-top: 1px solid #e1e8ed;
}

/* æ— æ•°æ®æç¤º */
.no-data {
    text-align: center;
    padding: 3rem;
    color: #666;
    background: #f8f9fa;
    border-radius: 10px;
    margin: 2rem 0;
}

.no-data p {
    font-size: 1.1rem;
    margin: 0;
}

/* å“åº”å¼ä¼˜åŒ– */
@media (max-width: 768px) {
    .profile-header {
        flex-direction: column;
        text-align: center;
        gap: 1rem;
    }

    .profile-basic-info h2 {
        font-size: 1.5rem;
    }

    .detail-grid {
        grid-template-columns: 1fr;
        gap: 1rem;
    }

    .actions-grid {
        grid-template-columns: 1fr;
    }

    .actions-bar {
        flex-direction: column;
        align-items: stretch;
    }

    .search-box {
        max-width: none;
    }

    .filter-box {
        justify-content: center;
    }

    .filter-box select {
        min-width: 120px;
    }

    .table-container {
        font-size: 0.9rem;
    }

    th, td {
        padding: 0.5rem;
    }

    .actions {
        flex-direction: column;
        gap: 0.25rem;
    }

    .btn-sm {
        font-size: 0.75rem;
        padding: 0.3rem 0.6rem;
    }

    .form-actions {
        flex-direction: column;
    }

    .form-actions button {
        width: 100%;
    }
}

@media (max-width: 480px) {
    .profile-header {
        padding: 1.5rem;
    }

    .avatar-placeholder {
        width: 60px;
        height: 60px;
        font-size: 1.5rem;
    }

    .profile-details {
        padding: 1.5rem;
    }

    .quick-actions {
        padding: 1.5rem;
    }

    .detail-group {
        margin-bottom: 1.5rem;
    }
}
</file>

<file path="database/schema.sql">
-- å­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿæ•°æ®åº“ç»“æ„
-- ä½¿ç”¨ Neon æ•°æ®åº“

-- åˆ›å»ºç®¡ç†å‘˜è¡¨
CREATE TABLE IF NOT EXISTS admins (
    id SERIAL PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    password VARCHAR(255) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- åˆ›å»ºå­¦ç”Ÿè¡¨
CREATE TABLE IF NOT EXISTS students (
    student_id VARCHAR(20) PRIMARY KEY,  -- å­¦å·ä½œä¸ºä¸»é”®
    name VARCHAR(50) NOT NULL,
    gender VARCHAR(10),
    age INTEGER,
    class_name VARCHAR(50),
    major VARCHAR(100),
    phone VARCHAR(20),
    email VARCHAR(100),
    password VARCHAR(255) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- æ’å…¥é»˜è®¤ç®¡ç†å‘˜è´¦å· (ç”¨æˆ·å: admin, å¯†ç : admin)
-- æ³¨æ„ï¼šè¿™é‡Œå¯†ç æ˜¯æ˜æ–‡ï¼Œå®é™…ä½¿ç”¨æ—¶éœ€è¦åœ¨åº”ç”¨å±‚åŠ å¯†
INSERT INTO admins (username, password)
VALUES ('admin', 'admin')
ON CONFLICT (username) DO NOTHING;

-- åˆ›å»ºç´¢å¼•ä»¥ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½
CREATE INDEX IF NOT EXISTS idx_students_name ON students(name);
CREATE INDEX IF NOT EXISTS idx_students_class ON students(class_name);
CREATE INDEX IF NOT EXISTS idx_students_major ON students(major);

-- æ·»åŠ æ›´æ–°æ—¶é—´è§¦å‘å™¨
CREATE OR REPLACE FUNCTION update_updated_at_column()
RETURNS TRIGGER AS $$
BEGIN
    NEW.updated_at = CURRENT_TIMESTAMP;
    RETURN NEW;
END;
$$ language 'plpgsql';

CREATE TRIGGER update_students_updated_at
    BEFORE UPDATE ON students
    FOR EACH ROW
    EXECUTE FUNCTION update_updated_at_column();
</file>

<file path="index.html">
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿ</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="container">
        <!-- å¯¼èˆªæ  -->
        <nav class="navbar">
            <h1>å­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿ</h1>
        </nav>

        <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
        <main class="main-content">
            <!-- ç™»å½•æ³¨å†Œé€‰æ‹©å™¨ -->
            <div class="auth-selector">
                <div class="selector-buttons">
                    <button id="adminLoginBtn" class="selector-btn active">ç®¡ç†å‘˜ç™»å½•</button>
                    <button id="studentLoginBtn" class="selector-btn">å­¦ç”Ÿç™»å½•</button>
                    <button id="studentRegisterBtn" class="selector-btn">å­¦ç”Ÿæ³¨å†Œ</button>
                </div>
            </div>

            <!-- ç®¡ç†å‘˜ç™»å½•è¡¨å• -->
            <div id="adminLoginForm" class="auth-form active">
                <div class="form-container">
                    <h2>ç®¡ç†å‘˜ç™»å½•</h2>
                    <form id="adminLogin">
                        <div class="form-group">
                            <label for="adminUsername">ç”¨æˆ·å</label>
                            <input type="text" id="adminUsername" name="username" required>
                        </div>
                        <div class="form-group">
                            <label for="adminPassword">å¯†ç </label>
                            <input type="password" id="adminPassword" name="password" required>
                        </div>
                        <button type="submit" class="btn btn-primary">ç™»å½•</button>
                    </form>
                    <div class="form-hint">
                        <p>é»˜è®¤ç®¡ç†å‘˜è´¦å·ï¼šadmin / admin</p>
                    </div>
                </div>
            </div>

            <!-- å­¦ç”Ÿç™»å½•è¡¨å• -->
            <div id="studentLoginForm" class="auth-form">
                <div class="form-container">
                    <h2>å­¦ç”Ÿç™»å½•</h2>
                    <form id="studentLogin">
                        <div class="form-group">
                            <label for="studentId">å­¦å·</label>
                            <input type="text" id="studentId" name="studentId" required>
                        </div>
                        <div class="form-group">
                            <label for="studentPassword">å¯†ç </label>
                            <input type="password" id="studentPassword" name="password" required>
                        </div>
                        <button type="submit" class="btn btn-primary">ç™»å½•</button>
                    </form>
                </div>
            </div>

            <!-- å­¦ç”Ÿæ³¨å†Œè¡¨å• -->
            <div id="studentRegisterForm" class="auth-form">
                <div class="form-container">
                    <h2>å­¦ç”Ÿæ³¨å†Œ</h2>
                    <form id="studentRegister">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="regStudentId">å­¦å·</label>
                                <input type="text" id="regStudentId" name="studentId" required>
                            </div>
                            <div class="form-group">
                                <label for="regName">å§“å</label>
                                <input type="text" id="regName" name="name" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="regGender">æ€§åˆ«</label>
                                <select id="regGender" name="gender" required>
                                    <option value="">è¯·é€‰æ‹©</option>
                                    <option value="ç”·">ç”·</option>
                                    <option value="å¥³">å¥³</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="regAge">å¹´é¾„</label>
                                <input type="number" id="regAge" name="age" min="15" max="50" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="regClass">ç­çº§</label>
                                <input type="text" id="regClass" name="className" required>
                            </div>
                            <div class="form-group">
                                <label for="regMajor">ä¸“ä¸š</label>
                                <input type="text" id="regMajor" name="major" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="regPhone">ç”µè¯</label>
                                <input type="tel" id="regPhone" name="phone" required>
                            </div>
                            <div class="form-group">
                                <label for="regEmail">é‚®ç®±</label>
                                <input type="email" id="regEmail" name="email" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="regPassword">å¯†ç </label>
                            <input type="password" id="regPassword" name="password" required minlength="6">
                        </div>
                        <div class="form-group">
                            <label for="regConfirmPassword">ç¡®è®¤å¯†ç </label>
                            <input type="password" id="regConfirmPassword" name="confirmPassword" required minlength="6">
                        </div>
                        <button type="submit" class="btn btn-primary">æ³¨å†Œ</button>
                    </form>
                </div>
            </div>
        </main>

        <!-- æ¶ˆæ¯æç¤ºåŒºåŸŸ -->
        <div id="messageArea" class="message-area"></div>
    </div>

    <script src="js/auth.js"></script>
</body>
</html>
</file>

<file path="js/admin.js">
// ç®¡ç†å‘˜é¡µé¢åŠŸèƒ½
class AdminDashboard {
    constructor() {
        this.currentEditingStudent = null;
        this.currentPage = 1;
        this.pageSize = 10;
        this.totalPages = 1;
        this.students = [];
        this.filteredStudents = [];
        this.init();
    }

    init() {
        this.checkAuth();
        this.setupEventListeners();
        this.loadStudents();
    }

    checkAuth() {
        const adminSession = localStorage.getItem('adminSession');
        if (!adminSession) {
            window.location.href = '/';
            return;
        }

        const admin = JSON.parse(adminSession);
        document.getElementById('adminUsername').textContent = admin.username;
    }

    setupEventListeners() {
        // é€€å‡ºç™»å½•
        document.getElementById('logoutBtn').addEventListener('click', () => {
            localStorage.removeItem('adminSession');
            window.location.href = '/';
        });

        // æ·»åŠ å­¦ç”Ÿ
        document.getElementById('addStudentBtn').addEventListener('click', () => {
            this.openStudentModal();
        });

        // æœç´¢åŠŸèƒ½
        document.getElementById('searchBtn').addEventListener('click', () => {
            this.searchStudents();
        });

        document.getElementById('searchInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                this.searchStudents();
            }
        });

        // ç­›é€‰åŠŸèƒ½
        document.getElementById('filterBtn').addEventListener('click', () => {
            this.filterStudents();
        });

        document.getElementById('resetBtn').addEventListener('click', () => {
            this.resetFilters();
        });

        // åˆ†é¡µ
        document.getElementById('prevPageBtn').addEventListener('click', () => {
            if (this.currentPage > 1) {
                this.currentPage--;
                this.displayStudents();
            }
        });

        document.getElementById('nextPageBtn').addEventListener('click', () => {
            if (this.currentPage < this.totalPages) {
                this.currentPage++;
                this.displayStudents();
            }
        });

        // å­¦ç”Ÿè¡¨å•æäº¤
        document.getElementById('studentForm').addEventListener('submit', (e) => {
            e.preventDefault();
            this.saveStudent(e.target);
        });

        // æ¨¡æ€æ¡†å…³é—­
        document.querySelectorAll('.modal-close').forEach(btn => {
            btn.addEventListener('click', () => {
                this.closeAllModals();
            });
        });

        // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    this.closeAllModals();
                }
            });
        });

        // åˆ é™¤ç¡®è®¤
        document.getElementById('confirmDeleteBtn').addEventListener('click', () => {
            this.confirmDelete();
        });
    }

    async loadStudents() {
        try {
            this.showMessage('æ­£åœ¨åŠ è½½å­¦ç”Ÿä¿¡æ¯...', 'info');

            const response = await this.apiCall('/api/students?search=&class=&major=');

            if (response.success) {
                this.students = response.students;
                this.filteredStudents = [...this.students];
                this.updateFilters();
                this.displayStudents();
                this.showMessage(`æˆåŠŸåŠ è½½ ${response.total} æ¡å­¦ç”Ÿä¿¡æ¯`, 'success');
            } else {
                this.showMessage('åŠ è½½å­¦ç”Ÿä¿¡æ¯å¤±è´¥', 'error');
            }
        } catch (error) {
            this.showMessage('åŠ è½½å­¦ç”Ÿä¿¡æ¯å¤±è´¥ï¼š' + error.message, 'error');
        }
    }

    searchStudents() {
        const searchTerm = document.getElementById('searchInput').value.toLowerCase().trim();

        if (searchTerm === '') {
            this.filteredStudents = [...this.students];
        } else {
            this.filteredStudents = this.students.filter(student =>
                student.name.toLowerCase().includes(searchTerm) ||
                student.student_id.toLowerCase().includes(searchTerm) ||
                student.class_name.toLowerCase().includes(searchTerm)
            );
        }

        this.currentPage = 1;
        this.displayStudents();
    }

    filterStudents() {
        const classFilter = document.getElementById('classFilter').value;
        const majorFilter = document.getElementById('majorFilter').value;
        const searchTerm = document.getElementById('searchInput').value.toLowerCase().trim();

        this.filteredStudents = this.students.filter(student => {
            let matchSearch = true;
            let matchClass = true;
            let matchMajor = true;

            if (searchTerm) {
                matchSearch = student.name.toLowerCase().includes(searchTerm) ||
                             student.student_id.toLowerCase().includes(searchTerm) ||
                             student.class_name.toLowerCase().includes(searchTerm);
            }

            if (classFilter) {
                matchClass = student.class_name === classFilter;
            }

            if (majorFilter) {
                matchMajor = student.major === majorFilter;
            }

            return matchSearch && matchClass && matchMajor;
        });

        this.currentPage = 1;
        this.displayStudents();
    }

    resetFilters() {
        document.getElementById('searchInput').value = '';
        document.getElementById('classFilter').value = '';
        document.getElementById('majorFilter').value = '';

        this.filteredStudents = [...this.students];
        this.currentPage = 1;
        this.displayStudents();
    }

    updateFilters() {
        // æ›´æ–°ç­çº§ç­›é€‰å™¨
        const classFilter = document.getElementById('classFilter');
        const classes = [...new Set(this.students.map(s => s.class_name).filter(Boolean))];
        classFilter.innerHTML = '<option value="">æ‰€æœ‰ç­çº§</option>';
        classes.forEach(className => {
            classFilter.innerHTML += `<option value="${className}">${className}</option>`;
        });

        // æ›´æ–°ä¸“ä¸šç­›é€‰å™¨
        const majorFilter = document.getElementById('majorFilter');
        const majors = [...new Set(this.students.map(s => s.major).filter(Boolean))];
        majorFilter.innerHTML = '<option value="">æ‰€æœ‰ä¸“ä¸š</option>';
        majors.forEach(major => {
            majorFilter.innerHTML += `<option value="${major}">${major}</option>`;
        });
    }

    displayStudents() {
        const tbody = document.getElementById('studentsTableBody');
        const noDataMessage = document.getElementById('noDataMessage');

        // è®¡ç®—åˆ†é¡µ
        this.totalPages = Math.ceil(this.filteredStudents.length / this.pageSize);
        const startIndex = (this.currentPage - 1) * this.pageSize;
        const endIndex = startIndex + this.pageSize;
        const pageStudents = this.filteredStudents.slice(startIndex, endIndex);

        // æ›´æ–°åˆ†é¡µä¿¡æ¯
        document.getElementById('pageInfo').textContent = `ç¬¬ ${this.currentPage} é¡µï¼Œå…± ${this.totalPages} é¡µ`;
        document.getElementById('prevPageBtn').disabled = this.currentPage === 1;
        document.getElementById('nextPageBtn').disabled = this.currentPage === this.totalPages;

        // æ¸…ç©ºè¡¨æ ¼
        tbody.innerHTML = '';

        if (pageStudents.length === 0) {
            noDataMessage.style.display = 'block';
            document.querySelector('.table-container table').style.display = 'none';
            document.querySelector('.pagination').style.display = 'none';
        } else {
            noDataMessage.style.display = 'none';
            document.querySelector('.table-container table').style.display = 'table';
            document.querySelector('.pagination').style.display = 'flex';

            pageStudents.forEach(student => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${student.student_id}</td>
                    <td>${student.name}</td>
                    <td>${student.gender || '-'}</td>
                    <td>${student.age || '-'}</td>
                    <td>${student.class_name || '-'}</td>
                    <td>${student.major || '-'}</td>
                    <td>${student.phone || '-'}</td>
                    <td>${student.email || '-'}</td>
                    <td class="actions">
                        <button class="btn btn-sm btn-primary edit-btn" data-id="${student.student_id}">ç¼–è¾‘</button>
                        <button class="btn btn-sm btn-danger delete-btn" data-id="${student.student_id}" data-name="${student.name}">åˆ é™¤</button>
                    </td>
                `;
                tbody.appendChild(row);
            });

            // æ·»åŠ æ“ä½œæŒ‰é’®äº‹ä»¶
            tbody.querySelectorAll('.edit-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    this.editStudent(btn.dataset.id);
                });
            });

            tbody.querySelectorAll('.delete-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    this.deleteStudent(btn.dataset.id, btn.dataset.name);
                });
            });
        }
    }

    openStudentModal(student = null) {
        const modal = document.getElementById('studentModal');
        const modalTitle = document.getElementById('modalTitle');
        const form = document.getElementById('studentForm');

        this.currentEditingStudent = student;

        if (student) {
            modalTitle.textContent = 'ç¼–è¾‘å­¦ç”Ÿä¿¡æ¯';
            form.studentId.value = student.student_id;
            form.studentId.disabled = true;
            form.name.value = student.name || '';
            form.gender.value = student.gender || '';
            form.age.value = student.age || '';
            form.className.value = student.class_name || '';
            form.major.value = student.major || '';
            form.phone.value = student.phone || '';
            form.email.value = student.email || '';
            form.password.value = '';
            form.password.placeholder = 'ç•™ç©ºåˆ™ä¸ä¿®æ”¹å¯†ç ';
        } else {
            modalTitle.textContent = 'æ·»åŠ å­¦ç”Ÿ';
            form.reset();
            form.studentId.disabled = false;
            form.password.placeholder = 'è¯·è¾“å…¥å¯†ç ';
        }

        modal.classList.add('active');
    }

    closeAllModals() {
        document.querySelectorAll('.modal').forEach(modal => {
            modal.classList.remove('active');
        });
        this.currentEditingStudent = null;
    }

    editStudent(studentId) {
        const student = this.students.find(s => s.student_id === studentId);
        if (student) {
            this.openStudentModal(student);
        }
    }

    deleteStudent(studentId, studentName) {
        this.currentEditingStudent = studentId;
        document.getElementById('deleteStudentName').textContent = studentName;
        document.getElementById('deleteModal').classList.add('active');
    }

    async confirmDelete() {
        if (!this.currentEditingStudent) return;

        try {
            this.showMessage('æ­£åœ¨åˆ é™¤å­¦ç”Ÿä¿¡æ¯...', 'info');

            const response = await this.apiCall(`/api/students/${this.currentEditingStudent}`, {
                method: 'DELETE'
            });

            if (response.success) {
                this.showMessage('åˆ é™¤å­¦ç”Ÿä¿¡æ¯æˆåŠŸ', 'success');
                this.closeAllModals();
                this.loadStudents(); // é‡æ–°åŠ è½½æ•°æ®
            } else {
                this.showMessage('åˆ é™¤å­¦ç”Ÿä¿¡æ¯å¤±è´¥', 'error');
            }
        } catch (error) {
            this.showMessage('åˆ é™¤å­¦ç”Ÿä¿¡æ¯å¤±è´¥ï¼š' + error.message, 'error');
        }
    }

    async saveStudent(form) {
        const formData = new FormData(form);
        const studentData = {
            name: formData.get('name'),
            gender: formData.get('gender'),
            age: formData.get('age') ? parseInt(formData.get('age')) : null,
            className: formData.get('className'),
            major: formData.get('major'),
            phone: formData.get('phone'),
            email: formData.get('email')
        };

        // åªæœ‰åœ¨å¡«å†™å¯†ç æ—¶æ‰åŒ…å«å¯†ç å­—æ®µ
        const password = formData.get('password');
        if (password) {
            studentData.password = password;
        }

        try {
            this.showMessage(this.currentEditingStudent ? 'æ­£åœ¨æ›´æ–°å­¦ç”Ÿä¿¡æ¯...' : 'æ­£åœ¨æ·»åŠ å­¦ç”Ÿ...', 'info');

            let response;
            if (this.currentEditingStudent) {
                // æ›´æ–°å­¦ç”Ÿ
                response = await this.apiCall(`/api/students/${this.currentEditingStudent}`, {
                    method: 'PUT',
                    body: JSON.stringify(studentData)
                });
            } else {
                // æ·»åŠ å­¦ç”Ÿ
                studentData.studentId = formData.get('studentId');
                response = await this.apiCall('/api/students', {
                    method: 'POST',
                    body: JSON.stringify(studentData)
                });
            }

            if (response.success) {
                this.showMessage(this.currentEditingStudent ? 'æ›´æ–°å­¦ç”Ÿä¿¡æ¯æˆåŠŸ' : 'æ·»åŠ å­¦ç”ŸæˆåŠŸ', 'success');
                this.closeAllModals();
                this.loadStudents(); // é‡æ–°åŠ è½½æ•°æ®
            } else {
                this.showMessage(response.message || 'æ“ä½œå¤±è´¥', 'error');
            }
        } catch (error) {
            this.showMessage('æ“ä½œå¤±è´¥ï¼š' + error.message, 'error');
        }
    }

    async apiCall(endpoint, options = {}) {
        const defaultOptions = {
            headers: {
                'Content-Type': 'application/json',
            }
        };

        const finalOptions = {
            ...defaultOptions,
            ...options,
            headers: {
                ...defaultOptions.headers,
                ...options.headers
            }
        };

        const response = await fetch(endpoint, finalOptions);
        const data = await response.json();

        if (!response.ok) {
            throw new Error(data.message || 'è¯·æ±‚å¤±è´¥');
        }

        return data;
    }

    showMessage(message, type = 'info') {
        const messageArea = document.getElementById('messageArea');
        const messageElement = document.createElement('div');
        messageElement.className = `message ${type}`;
        messageElement.textContent = message;

        messageArea.appendChild(messageElement);

        setTimeout(() => {
            messageElement.remove();
        }, 3000);
    }
}

// åˆå§‹åŒ–ç®¡ç†å‘˜ä»ªè¡¨æ¿
document.addEventListener('DOMContentLoaded', () => {
    window.adminDashboard = new AdminDashboard();
});
</file>

<file path="js/auth.js">
// è®¤è¯ç›¸å…³åŠŸèƒ½
class AuthManager {
    constructor() {
        this.currentUser = null;
        this.init();
    }

    init() {
        this.setupEventListeners();
        this.checkExistingSession();
    }

    setupEventListeners() {
        // è®¤è¯é€‰æ‹©å™¨æŒ‰é’®äº‹ä»¶
        document.getElementById('adminLoginBtn').addEventListener('click', () => {
            this.showForm('admin');
        });

        document.getElementById('studentLoginBtn').addEventListener('click', () => {
            this.showForm('student-login');
        });

        document.getElementById('studentRegisterBtn').addEventListener('click', () => {
            this.showForm('student-register');
        });

        // è¡¨å•æäº¤äº‹ä»¶
        document.getElementById('adminLogin').addEventListener('submit', (e) => {
            e.preventDefault();
            this.handleAdminLogin(e.target);
        });

        document.getElementById('studentLogin').addEventListener('submit', (e) => {
            e.preventDefault();
            this.handleStudentLogin(e.target);
        });

        document.getElementById('studentRegister').addEventListener('submit', (e) => {
            e.preventDefault();
            this.handleStudentRegister(e.target);
        });

        // å¯†ç ç¡®è®¤éªŒè¯
        document.getElementById('regConfirmPassword').addEventListener('input', (e) => {
            const password = document.getElementById('regPassword').value;
            const confirmPassword = e.target.value;

            if (password !== confirmPassword) {
                e.target.setCustomValidity('å¯†ç ä¸åŒ¹é…');
            } else {
                e.target.setCustomValidity('');
            }
        });
    }

    showForm(formType) {
        // éšè—æ‰€æœ‰è¡¨å•
        document.querySelectorAll('.auth-form').forEach(form => {
            form.classList.remove('active');
        });

        // ç§»é™¤æ‰€æœ‰æŒ‰é’®çš„æ´»åŠ¨çŠ¶æ€
        document.querySelectorAll('.selector-btn').forEach(btn => {
            btn.classList.remove('active');
        });

        // æ˜¾ç¤ºé€‰ä¸­çš„è¡¨å•
        switch(formType) {
            case 'admin':
                document.getElementById('adminLoginForm').classList.add('active');
                document.getElementById('adminLoginBtn').classList.add('active');
                break;
            case 'student-login':
                document.getElementById('studentLoginForm').classList.add('active');
                document.getElementById('studentLoginBtn').classList.add('active');
                break;
            case 'student-register':
                document.getElementById('studentRegisterForm').classList.add('active');
                document.getElementById('studentRegisterBtn').classList.add('active');
                break;
        }
    }

    async handleAdminLogin(form) {
        const formData = new FormData(form);
        const username = formData.get('username');
        const password = formData.get('password');

        try {
            this.showMessage('æ­£åœ¨ç™»å½•...', 'info');

            const response = await this.apiCall('/api/auth/admin/login', {
                method: 'POST',
                body: JSON.stringify({ username, password })
            });

            if (response.success) {
                this.showMessage('ç™»å½•æˆåŠŸï¼', 'success');
                // ä¿å­˜ä¼šè¯ä¿¡æ¯
                localStorage.setItem('adminSession', JSON.stringify({
                    id: response.admin.id,
                    username: response.admin.username,
                    type: 'admin'
                }));

                // è·³è½¬åˆ°ç®¡ç†å‘˜é¡µé¢
                setTimeout(() => {
                    window.location.href = '/admin.html';
                }, 1000);
            } else {
                this.showMessage(response.message || 'ç™»å½•å¤±è´¥', 'error');
            }
        } catch (error) {
            this.showMessage('ç™»å½•å¤±è´¥ï¼š' + error.message, 'error');
        }
    }

    async handleStudentLogin(form) {
        const formData = new FormData(form);
        const studentId = formData.get('studentId');
        const password = formData.get('password');

        try {
            this.showMessage('æ­£åœ¨ç™»å½•...', 'info');

            const response = await this.apiCall('/api/auth/student/login', {
                method: 'POST',
                body: JSON.stringify({ studentId, password })
            });

            if (response.success) {
                this.showMessage('ç™»å½•æˆåŠŸï¼', 'success');
                // ä¿å­˜ä¼šè¯ä¿¡æ¯
                localStorage.setItem('studentSession', JSON.stringify({
                    studentId: response.student.student_id,
                    name: response.student.name,
                    type: 'student'
                }));

                // è·³è½¬åˆ°å­¦ç”Ÿé¡µé¢
                setTimeout(() => {
                    window.location.href = '/student.html';
                }, 1000);
            } else {
                this.showMessage(response.message || 'ç™»å½•å¤±è´¥', 'error');
            }
        } catch (error) {
            this.showMessage('ç™»å½•å¤±è´¥ï¼š' + error.message, 'error');
        }
    }

    async handleStudentRegister(form) {
        const formData = new FormData(form);
        const password = formData.get('password');
        const confirmPassword = formData.get('confirmPassword');

        // éªŒè¯å¯†ç åŒ¹é…
        if (password !== confirmPassword) {
            this.showMessage('å¯†ç ä¸åŒ¹é…', 'error');
            return;
        }

        try {
            this.showMessage('æ­£åœ¨æ³¨å†Œ...', 'info');

            const studentData = {
                studentId: formData.get('studentId'),
                name: formData.get('name'),
                gender: formData.get('gender'),
                age: parseInt(formData.get('age')),
                className: formData.get('className'),
                major: formData.get('major'),
                phone: formData.get('phone'),
                email: formData.get('email'),
                password: password
            };

            const response = await this.apiCall('/api/auth/student/register', {
                method: 'POST',
                body: JSON.stringify(studentData)
            });

            if (response.success) {
                this.showMessage('æ³¨å†ŒæˆåŠŸï¼è¯·ç™»å½•', 'success');
                // æ¸…ç©ºè¡¨å•
                form.reset();
                // åˆ‡æ¢åˆ°ç™»å½•é¡µé¢
                setTimeout(() => {
                    this.showForm('student-login');
                }, 1500);
            } else {
                this.showMessage(response.message || 'æ³¨å†Œå¤±è´¥', 'error');
            }
        } catch (error) {
            this.showMessage('æ³¨å†Œå¤±è´¥ï¼š' + error.message, 'error');
        }
    }

    async apiCall(endpoint, options = {}) {
        const defaultOptions = {
            headers: {
                'Content-Type': 'application/json',
            }
        };

        const finalOptions = {
            ...defaultOptions,
            ...options,
            headers: {
                ...defaultOptions.headers,
                ...options.headers
            }
        };

        const response = await fetch(endpoint, finalOptions);
        const data = await response.json();

        if (!response.ok) {
            throw new Error(data.message || 'è¯·æ±‚å¤±è´¥');
        }

        return data;
    }

    showMessage(message, type = 'info') {
        const messageArea = document.getElementById('messageArea');
        const messageElement = document.createElement('div');
        messageElement.className = `message ${type}`;
        messageElement.textContent = message;

        messageArea.appendChild(messageElement);

        // 3ç§’åè‡ªåŠ¨ç§»é™¤æ¶ˆæ¯
        setTimeout(() => {
            messageElement.remove();
        }, 3000);
    }

    checkExistingSession() {
        const adminSession = localStorage.getItem('adminSession');
        const studentSession = localStorage.getItem('studentSession');

        if (adminSession) {
            window.location.href = '/admin.html';
        } else if (studentSession) {
            window.location.href = '/student.html';
        }
    }

    logout() {
        localStorage.removeItem('adminSession');
        localStorage.removeItem('studentSession');
        window.location.href = '/';
    }
}

// å…¨å±€å·¥å…·å‡½æ•°
function showMessage(message, type = 'info') {
    const messageArea = document.getElementById('messageArea') || createMessageArea();
    const messageElement = document.createElement('div');
    messageElement.className = `message ${type}`;
    messageElement.textContent = message;

    messageArea.appendChild(messageElement);

    setTimeout(() => {
        messageElement.remove();
    }, 3000);
}

function createMessageArea() {
    const messageArea = document.createElement('div');
    messageArea.id = 'messageArea';
    messageArea.className = 'message-area';
    document.body.appendChild(messageArea);
    return messageArea;
}

// åˆå§‹åŒ–è®¤è¯ç®¡ç†å™¨
document.addEventListener('DOMContentLoaded', () => {
    window.authManager = new AuthManager();
});
</file>

<file path="js/student.js">
// å­¦ç”Ÿé¡µé¢åŠŸèƒ½
class StudentDashboard {
    constructor() {
        this.studentInfo = null;
        this.init();
    }

    init() {
        this.checkAuth();
        this.setupEventListeners();
        this.loadStudentInfo();
    }

    checkAuth() {
        const studentSession = localStorage.getItem('studentSession');
        if (!studentSession) {
            window.location.href = '/';
            return;
        }

        const student = JSON.parse(studentSession);
        document.getElementById('studentName').textContent = student.name;
    }

    setupEventListeners() {
        // é€€å‡ºç™»å½•
        document.getElementById('logoutBtn').addEventListener('click', () => {
            localStorage.removeItem('studentSession');
            window.location.href = '/';
        });

        // ç¼–è¾‘ä¿¡æ¯
        document.getElementById('editInfoBtn').addEventListener('click', () => {
            this.openEditModal();
        });

        // ä¿®æ”¹å¯†ç 
        document.getElementById('changePasswordBtn').addEventListener('click', () => {
            this.openPasswordModal();
        });

        // å¯¼å‡ºä¿¡æ¯
        document.getElementById('exportInfoBtn').addEventListener('click', () => {
            this.exportStudentInfo();
        });

        // ç¼–è¾‘è¡¨å•æäº¤
        document.getElementById('editForm').addEventListener('submit', (e) => {
            e.preventDefault();
            this.saveStudentInfo(e.target);
        });

        // å¯†ç è¡¨å•æäº¤
        document.getElementById('passwordForm').addEventListener('submit', (e) => {
            e.preventDefault();
            this.changePassword(e.target);
        });

        // æ¨¡æ€æ¡†å…³é—­
        document.querySelectorAll('.modal-close').forEach(btn => {
            btn.addEventListener('click', () => {
                this.closeAllModals();
            });
        });

        // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    this.closeAllModals();
                }
            });
        });

        // å¯†ç ç¡®è®¤éªŒè¯
        document.getElementById('confirmNewPassword').addEventListener('input', (e) => {
            const newPassword = document.getElementById('newPassword').value;
            const confirmNewPassword = e.target.value;

            if (newPassword !== confirmNewPassword) {
                e.target.setCustomValidity('å¯†ç ä¸åŒ¹é…');
            } else {
                e.target.setCustomValidity('');
            }
        });
    }

    async loadStudentInfo() {
        try {
            const studentSession = JSON.parse(localStorage.getItem('studentSession'));
            const studentId = studentSession.studentId;

            this.showMessage('æ­£åœ¨åŠ è½½ä¸ªäººä¿¡æ¯...', 'info');

            const response = await this.apiCall(`/api/students/${studentId}`);

            if (response.success) {
                this.studentInfo = response.student;
                this.displayStudentInfo();
                this.showMessage('åŠ è½½ä¸ªäººä¿¡æ¯æˆåŠŸ', 'success');
            } else {
                this.showMessage('åŠ è½½ä¸ªäººä¿¡æ¯å¤±è´¥', 'error');
            }
        } catch (error) {
            this.showMessage('åŠ è½½ä¸ªäººä¿¡æ¯å¤±è´¥ï¼š' + error.message, 'error');
        }
    }

    displayStudentInfo() {
        if (!this.studentInfo) return;

        // æ›´æ–°å¤´éƒ¨ä¿¡æ¯
        document.getElementById('profileName').textContent = this.studentInfo.name || 'æœªçŸ¥';
        document.getElementById('profileStudentId').textContent = `å­¦å·ï¼š${this.studentInfo.student_id || 'æœªçŸ¥'}`;
        document.getElementById('profileClass').textContent = `ç­çº§ï¼š${this.studentInfo.class_name || 'æœªçŸ¥'}`;

        // æ›´æ–°å¤´åƒ
        const firstChar = (this.studentInfo.name || 'å­¦').charAt(0);
        document.getElementById('avatarText').textContent = firstChar;

        // æ›´æ–°åŸºæœ¬ä¿¡æ¯
        document.getElementById('profileGender').textContent = this.studentInfo.gender || '-';
        document.getElementById('profileAge').textContent = this.studentInfo.age || '-';
        document.getElementById('profileMajor').textContent = this.studentInfo.major || '-';

        // æ›´æ–°è”ç³»æ–¹å¼
        document.getElementById('profilePhone').textContent = this.studentInfo.phone || '-';
        document.getElementById('profileEmail').textContent = this.studentInfo.email || '-';

        // æ›´æ–°ç³»ç»Ÿä¿¡æ¯
        if (this.studentInfo.created_at) {
            const createdDate = new Date(this.studentInfo.created_at).toLocaleDateString('zh-CN');
            document.getElementById('profileCreatedAt').textContent = createdDate;
        }

        if (this.studentInfo.updated_at) {
            const updatedDate = new Date(this.studentInfo.updated_at).toLocaleDateString('zh-CN');
            document.getElementById('profileUpdatedAt').textContent = updatedDate;
        }

        // æ›´æ–°å¯¼èˆªæ ç”¨æˆ·ä¿¡æ¯
        document.getElementById('studentName').textContent = this.studentInfo.name;
    }

    openEditModal() {
        if (!this.studentInfo) return;

        const form = document.getElementById('editForm');

        // å¡«å……å½“å‰ä¿¡æ¯
        form.gender.value = this.studentInfo.gender || '';
        form.age.value = this.studentInfo.age || '';
        form.className.value = this.studentInfo.class_name || '';
        form.major.value = this.studentInfo.major || '';
        form.phone.value = this.studentInfo.phone || '';
        form.email.value = this.studentInfo.email || '';

        document.getElementById('editModal').classList.add('active');
    }

    openPasswordModal() {
        const form = document.getElementById('passwordForm');
        form.reset();
        document.getElementById('passwordModal').classList.add('active');
    }

    closeAllModals() {
        document.querySelectorAll('.modal').forEach(modal => {
            modal.classList.remove('active');
        });
    }

    async saveStudentInfo(form) {
        const formData = new FormData(form);
        const studentData = {
            gender: formData.get('gender'),
            age: formData.get('age') ? parseInt(formData.get('age')) : null,
            className: formData.get('className'),
            major: formData.get('major'),
            phone: formData.get('phone'),
            email: formData.get('email')
        };

        try {
            this.showMessage('æ­£åœ¨ä¿å­˜ä¸ªäººä¿¡æ¯...', 'info');

            const studentSession = JSON.parse(localStorage.getItem('studentSession'));
            const studentId = studentSession.studentId;

            const response = await this.apiCall(`/api/students/${studentId}`, {
                method: 'PUT',
                body: JSON.stringify(studentData)
            });

            if (response.success) {
                this.showMessage('ä¿å­˜ä¸ªäººä¿¡æ¯æˆåŠŸ', 'success');
                this.closeAllModals();
                // é‡æ–°åŠ è½½ä¿¡æ¯
                await this.loadStudentInfo();
            } else {
                this.showMessage(response.message || 'ä¿å­˜å¤±è´¥', 'error');
            }
        } catch (error) {
            this.showMessage('ä¿å­˜å¤±è´¥ï¼š' + error.message, 'error');
        }
    }

    async changePassword(form) {
        const formData = new FormData(form);
        const currentPassword = formData.get('currentPassword');
        const newPassword = formData.get('newPassword');
        const confirmNewPassword = formData.get('confirmNewPassword');

        // éªŒè¯æ–°å¯†ç åŒ¹é…
        if (newPassword !== confirmNewPassword) {
            this.showMessage('æ–°å¯†ç ä¸åŒ¹é…', 'error');
            return;
        }

        // éªŒè¯å½“å‰å¯†ç ï¼ˆè¿™é‡Œç®€åŒ–å¤„ç†ï¼Œå®é™…åº”è¯¥å…ˆéªŒè¯å½“å‰å¯†ç æ˜¯å¦æ­£ç¡®ï¼‰
        if (!currentPassword || !newPassword) {
            this.showMessage('è¯·å¡«å†™å®Œæ•´çš„å¯†ç ä¿¡æ¯', 'error');
            return;
        }

        try {
            this.showMessage('æ­£åœ¨ä¿®æ”¹å¯†ç ...', 'info');

            const studentSession = JSON.parse(localStorage.getItem('studentSession'));
            const studentId = studentSession.studentId;

            const response = await this.apiCall(`/api/students/${studentId}`, {
                method: 'PUT',
                body: JSON.stringify({ password: newPassword })
            });

            if (response.success) {
                this.showMessage('ä¿®æ”¹å¯†ç æˆåŠŸ', 'success');
                this.closeAllModals();
                form.reset();
            } else {
                this.showMessage(response.message || 'ä¿®æ”¹å¯†ç å¤±è´¥', 'error');
            }
        } catch (error) {
            this.showMessage('ä¿®æ”¹å¯†ç å¤±è´¥ï¼š' + error.message, 'error');
        }
    }

    exportStudentInfo() {
        if (!this.studentInfo) {
            this.showMessage('æš‚æ— ä¿¡æ¯å¯å¯¼å‡º', 'error');
            return;
        }

        // åˆ›å»ºå¯¼å‡ºæ•°æ®
        const exportData = {
            å­¦å·: this.studentInfo.student_id,
            å§“å: this.studentInfo.name,
            æ€§åˆ«: this.studentInfo.gender || '',
            å¹´é¾„: this.studentInfo.age || '',
            ç­çº§: this.studentInfo.class_name || '',
            ä¸“ä¸š: this.studentInfo.major || '',
            ç”µè¯: this.studentInfo.phone || '',
            é‚®ç®±: this.studentInfo.email || '',
            æ³¨å†Œæ—¶é—´: this.studentInfo.created_at ? new Date(this.studentInfo.created_at).toLocaleString('zh-CN') : '',
            æœ€åæ›´æ–°: this.studentInfo.updated_at ? new Date(this.studentInfo.updated_at).toLocaleString('zh-CN') : ''
        };

        // åˆ›å»ºCSVå†…å®¹
        const headers = Object.keys(exportData);
        const values = Object.values(exportData);

        let csvContent = '\ufeff'; // UTF-8 BOM
        csvContent += headers.join(',') + '\n';
        csvContent += values.map(value => `"${value}"`).join(',');

        // åˆ›å»ºä¸‹è½½é“¾æ¥
        const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
        const link = document.createElement('a');
        const url = URL.createObjectURL(blob);

        link.setAttribute('href', url);
        link.setAttribute('download', `å­¦ç”Ÿä¿¡æ¯_${this.studentInfo.name}_${this.studentInfo.student_id}.csv`);
        link.style.visibility = 'hidden';

        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);

        this.showMessage('ä¿¡æ¯å¯¼å‡ºæˆåŠŸ', 'success');
    }

    async apiCall(endpoint, options = {}) {
        const defaultOptions = {
            headers: {
                'Content-Type': 'application/json',
            }
        };

        const finalOptions = {
            ...defaultOptions,
            ...options,
            headers: {
                ...defaultOptions.headers,
                ...options.headers
            }
        };

        const response = await fetch(endpoint, finalOptions);
        const data = await response.json();

        if (!response.ok) {
            throw new Error(data.message || 'è¯·æ±‚å¤±è´¥');
        }

        return data;
    }

    showMessage(message, type = 'info') {
        const messageArea = document.getElementById('messageArea');
        const messageElement = document.createElement('div');
        messageElement.className = `message ${type}`;
        messageElement.textContent = message;

        messageArea.appendChild(messageElement);

        setTimeout(() => {
            messageElement.remove();
        }, 3000);
    }
}

// åˆå§‹åŒ–å­¦ç”Ÿä»ªè¡¨æ¿
document.addEventListener('DOMContentLoaded', () => {
    window.studentDashboard = new StudentDashboard();
});
</file>

<file path="LICENSE">
MIT License

Copyright (c) 2025 Student Information Management System

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
</file>

<file path="student.html">
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å­¦ç”Ÿä¸ªäººä¿¡æ¯ - å­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿ</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="container">
        <!-- å¯¼èˆªæ  -->
        <nav class="navbar">
            <h1>å­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿ</h1>
            <div class="user-info">
                <span id="studentName">å­¦ç”Ÿ</span>
                <button id="logoutBtn" class="btn btn-secondary">é€€å‡ºç™»å½•</button>
            </div>
        </nav>

        <!-- å­¦ç”Ÿä¸ªäººä»ªè¡¨æ¿ -->
        <main class="dashboard">
            <div class="dashboard-header">
                <h1>æˆ‘çš„ä¸ªäººä¿¡æ¯</h1>
                <button id="editInfoBtn" class="btn btn-primary">ç¼–è¾‘ä¿¡æ¯</button>
            </div>

            <!-- ä¸ªäººä¿¡æ¯å¡ç‰‡ -->
            <div class="profile-card">
                <div class="profile-header">
                    <div class="profile-avatar">
                        <div class="avatar-placeholder">
                            <span id="avatarText">å­¦</span>
                        </div>
                    </div>
                    <div class="profile-basic-info">
                        <h2 id="profileName">å§“å</h2>
                        <p id="profileStudentId">å­¦å·</p>
                        <p id="profileClass">ç­çº§</p>
                    </div>
                </div>

                <div class="profile-details">
                    <div class="detail-group">
                        <h3>åŸºæœ¬ä¿¡æ¯</h3>
                        <div class="detail-grid">
                            <div class="detail-item">
                                <label>æ€§åˆ«</label>
                                <span id="profileGender">-</span>
                            </div>
                            <div class="detail-item">
                                <label>å¹´é¾„</label>
                                <span id="profileAge">-</span>
                            </div>
                            <div class="detail-item">
                                <label>ä¸“ä¸š</label>
                                <span id="profileMajor">-</span>
                            </div>
                        </div>
                    </div>

                    <div class="detail-group">
                        <h3>è”ç³»æ–¹å¼</h3>
                        <div class="detail-grid">
                            <div class="detail-item">
                                <label>ç”µè¯</label>
                                <span id="profilePhone">-</span>
                            </div>
                            <div class="detail-item">
                                <label>é‚®ç®±</label>
                                <span id="profileEmail">-</span>
                            </div>
                        </div>
                    </div>

                    <div class="detail-group">
                        <h3>ç³»ç»Ÿä¿¡æ¯</h3>
                        <div class="detail-grid">
                            <div class="detail-item">
                                <label>æ³¨å†Œæ—¶é—´</label>
                                <span id="profileCreatedAt">-</span>
                            </div>
                            <div class="detail-item">
                                <label>æœ€åæ›´æ–°</label>
                                <span id="profileUpdatedAt">-</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- å¿«æ·æ“ä½œ -->
            <div class="quick-actions">
                <h3>å¿«æ·æ“ä½œ</h3>
                <div class="actions-grid">
                    <button id="changePasswordBtn" class="btn btn-secondary">
                        ä¿®æ”¹å¯†ç 
                    </button>
                    <button id="exportInfoBtn" class="btn btn-secondary">
                        å¯¼å‡ºä¿¡æ¯
                    </button>
                </div>
            </div>
        </main>

        <!-- ç¼–è¾‘ä¸ªäººä¿¡æ¯æ¨¡æ€æ¡† -->
        <div id="editModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>ç¼–è¾‘ä¸ªäººä¿¡æ¯</h2>
                    <button class="modal-close">&times;</button>
                </div>
                <form id="editForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editGender">æ€§åˆ«</label>
                            <select id="editGender" name="gender">
                                <option value="">è¯·é€‰æ‹©</option>
                                <option value="ç”·">ç”·</option>
                                <option value="å¥³">å¥³</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="editAge">å¹´é¾„</label>
                            <input type="number" id="editAge" name="age" min="15" max="50">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editClass">ç­çº§</label>
                            <input type="text" id="editClass" name="className">
                        </div>
                        <div class="form-group">
                            <label for="editMajor">ä¸“ä¸š</label>
                            <input type="text" id="editMajor" name="major">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editPhone">ç”µè¯</label>
                            <input type="tel" id="editPhone" name="phone">
                        </div>
                        <div class="form-group">
                            <label for="editEmail">é‚®ç®±</label>
                            <input type="email" id="editEmail" name="email">
                        </div>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">ä¿å­˜</button>
                        <button type="button" class="btn btn-secondary modal-close">å–æ¶ˆ</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- ä¿®æ”¹å¯†ç æ¨¡æ€æ¡† -->
        <div id="passwordModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>ä¿®æ”¹å¯†ç </h2>
                    <button class="modal-close">&times;</button>
                </div>
                <form id="passwordForm">
                    <div class="form-group">
                        <label for="currentPassword">å½“å‰å¯†ç </label>
                        <input type="password" id="currentPassword" name="currentPassword" required>
                    </div>
                    <div class="form-group">
                        <label for="newPassword">æ–°å¯†ç </label>
                        <input type="password" id="newPassword" name="newPassword" required minlength="6">
                    </div>
                    <div class="form-group">
                        <label for="confirmNewPassword">ç¡®è®¤æ–°å¯†ç </label>
                        <input type="password" id="confirmNewPassword" name="confirmNewPassword" required minlength="6">
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">ä¿®æ”¹å¯†ç </button>
                        <button type="button" class="btn btn-secondary modal-close">å–æ¶ˆ</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- æ¶ˆæ¯æç¤ºåŒºåŸŸ -->
        <div id="messageArea" class="message-area"></div>
    </div>

    <script src="js/student.js"></script>
</body>
</html>
</file>

<file path="package.json">
{
  "name": "student-info-system",
  "version": "1.0.0",
  "description": "å­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿ",
  "main": "index.html",
  "scripts": {
    "dev": "vercel dev",
    "build": "echo 'No build step required'",
    "start": "vercel dev"
  },
  "keywords": ["student", "management", "system", "vercel", "neon"],
  "author": "",
  "license": "MIT",
  "dependencies": {
    "pg": "^8.11.3"
  },
  "devDependencies": {}
}
</file>

<file path="vercel.json">
{
  "version": 2,
  "buildCommand": "echo 'No build step required'",
  "outputDirectory": ".",
  "rewrites": [
    {
      "source": "/",
      "destination": "/index.html"
    },
    {
      "source": "/admin",
      "destination": "/admin.html"
    },
    {
      "source": "/student",
      "destination": "/student.html"
    }
  ]
}
</file>

</files>
